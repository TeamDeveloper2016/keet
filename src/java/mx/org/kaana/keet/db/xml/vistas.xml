<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
		Relación de consultas para las vistas de MANTIC
-->
<process>
	<dml> 
		<unit id="VistaTiposObrasDto">
			<select id="catalogo">
				select
					tc_keet_tipos_obras.id_tipo_obra AS id_key,
					tc_keet_tipos_obras.id_division,
					tc_keet_tipos_obras.clave,
					tc_keet_tipos_obras.nombre tipo_obra,
					tc_keet_divisiones.nombre tipo_division
				from
					tc_keet_tipos_obras
				inner join
					tc_keet_divisiones ON tc_keet_tipos_obras.id_division = tc_keet_divisiones.id_division
				order by
					tc_keet_tipos_obras.id_division, tc_keet_tipos_obras.clave
			</select>			
		</unit>
    <unit id="VistaContratosDto">
			<select id="lazy">
				select 
          tc_keet_contratos.id_contrato id_key,
          tc_keet_contratos.id_contrato,
          tc_keet_contratos.clave,
          tc_keet_contratos.no_viviendas,
          tc_keet_contratos.etapa,
          tc_mantic_clientes.razon_social,
					tc_keet_contratos_estatus.id_contrato_estatus,
					tc_keet_contratos_estatus.nombre as estatus,
					tc_keet_contratos_estatus.estatus_asociados,
					tc_keet_contratos.registro,
				  tc_keet_proyectos.clave proyecto
        from 
          tc_keet_contratos
        inner join 
					tc_keet_proyectos on tc_keet_proyectos.id_proyecto= tc_keet_contratos.id_proyecto
        inner join 
					tc_mantic_clientes on tc_mantic_clientes.id_cliente= tc_keet_proyectos.id_cliente
        inner join
          tc_keet_contratos_estatus on tc_keet_contratos_estatus.id_contrato_estatus= tc_keet_contratos.id_contrato_estatus      
        where
          {condicion}
				{sortOrder}
			</select>	
			<select id="findDesarrollo">
				select 
					tc_keet_contratos.id_contrato as id_key,
					tc_keet_contratos.*
				from
					tc_keet_contratos
				inner join
					tc_keet_proyectos on tc_keet_contratos.id_proyecto = tc_keet_proyectos.id_proyecto
				inner join
					tc_keet_desarrollos on tc_keet_proyectos.id_desarrollo = tc_keet_desarrollos.id_desarrollo
				where
					tc_keet_desarrollos.id_desarrollo= {idDesarrollo}
			</select>
			<select id="personalAsignado">
				select      
					{campoLlave} as id_key,									
					tc_keet_departamentos.nombre departamento,
					tc_mantic_puestos.nombre puesto,
					tr_mantic_empresa_personal.id_activo,
					tc_mantic_personas.nombres,
					tc_mantic_personas.paterno,
					tc_mantic_personas.materno,					
					tc_mantic_personas.rfc,					
					tc_mantic_personas.curp,					
          tc_keet_contratos_personal.*
        from      
          tc_keet_contratos_personal
				inner join 
					tr_mantic_empresa_personal on tc_keet_contratos_personal.id_empresa_persona = tr_mantic_empresa_personal.id_empresa_persona
				inner join 
					tc_mantic_personas on tr_mantic_empresa_personal.id_persona = tc_mantic_personas.id_persona
				inner join 
					tc_keet_departamentos on tr_mantic_empresa_personal.id_departamento = tc_keet_departamentos.id_departamento
				inner join	
					tc_mantic_puestos on tr_mantic_empresa_personal.id_puesto = tc_mantic_puestos.id_puesto
        where 
          tc_keet_contratos_personal.id_desarrollo= {idDesarrollo}
				  and tr_mantic_empresa_personal.id_activo= 1
				  and {condicion}
				order by 
					tc_mantic_puestos.nombre,
					tc_mantic_personas.nombres
			</select>
			<select id="findContratoPersona">
				select      
					tc_keet_contratos_personal.id_contratos_personal as id_key,									
					tc_keet_departamentos.nombre departamento,
					tc_mantic_puestos.nombre puesto,
					tr_mantic_empresa_personal.id_activo,
					tc_mantic_personas.nombres,
					tc_mantic_personas.paterno,
					tc_mantic_personas.materno,					
					tc_mantic_personas.rfc,					
					tc_mantic_personas.curp,					
          tc_keet_contratos_personal.*,					
					tc_keet_desarrollos.clave clave_desarrollo,
					tc_keet_desarrollos.nombres nombre_desarrollo
        from      
          tc_keet_contratos_personal
				inner join 
					tr_mantic_empresa_personal on tc_keet_contratos_personal.id_empresa_persona = tr_mantic_empresa_personal.id_empresa_persona
				inner join 
					tc_mantic_personas on tr_mantic_empresa_personal.id_persona = tc_mantic_personas.id_persona
				inner join 
					tc_keet_departamentos on tr_mantic_empresa_personal.id_departamento = tc_keet_departamentos.id_departamento
				inner join	
					tc_mantic_puestos on tr_mantic_empresa_personal.id_puesto = tc_mantic_puestos.id_puesto				
				inner join 
					tc_keet_desarrollos on tc_keet_contratos_personal.id_desarrollo = tc_keet_desarrollos.id_desarrollo
        where 
          tc_keet_contratos_personal.id_contratos_personal= {idContratoPersona}
				order by 
					tc_mantic_puestos.nombre,
					tc_mantic_personas.nombres
			</select>
			<select id="personalDisponible">
				select      
					tr_mantic_empresa_personal.id_empresa_persona as id_key,			
					tr_mantic_empresa_personal.id_empresa_persona,
					tc_keet_departamentos.nombre departamento,
					tc_mantic_puestos.nombre puesto,
					tr_mantic_empresa_personal.id_activo,
					tc_mantic_personas.nombres,
					tc_mantic_personas.paterno,
					tc_mantic_personas.materno,					
					tc_mantic_personas.rfc,					
					tc_mantic_personas.curp          
        from                				
					tr_mantic_empresa_personal
				inner join 
					tc_mantic_personas on tr_mantic_empresa_personal.id_persona = tc_mantic_personas.id_persona
				inner join 
					tc_keet_departamentos on tr_mantic_empresa_personal.id_departamento = tc_keet_departamentos.id_departamento
				inner join	
					tc_mantic_puestos on tr_mantic_empresa_personal.id_puesto = tc_mantic_puestos.id_puesto
        where 
          tr_mantic_empresa_personal.id_empresa_persona not in (select id_empresa_persona from tc_keet_contratos_personal where tc_keet_contratos_personal.id_desarrollo= {idDesarrollo})
				and 
					tr_mantic_empresa_personal.id_empresa= {idEmpresa}
				  and tr_mantic_empresa_personal.id_activo= 1
				  and {condicion}
				order by 
					tc_mantic_puestos.nombre,
					tc_mantic_personas.nombres
			</select>
		</unit>
    <unit id="VistaPrototiposDto">
			<select id="lazy">
				select 
          tc_keet_prototipos.id_prototipo as id_key,
          tc_keet_prototipos.clave,
          tc_keet_prototipos.nombre,
          tc_keet_prototipos.descripcion,
          tc_keet_prototipos.metros2,
          tc_mantic_clientes.razon_social
        from
          tc_keet_prototipos
        inner 
				  join tc_mantic_clientes on tc_mantic_clientes.id_cliente= tc_keet_prototipos.id_cliente
        where
          {condicion}
				  {sortOrder}
			</select>	
			<select id="constructivosById">
				select      
					tc_keet_prototipos_constructivos.id_prototipo_constructivo id_key,
					tc_keet_prototipos_constructivos.*,
					tc_keet_constructivos.nombre descripcion,
					tc_keet_grupos_constructivos.nombre grupo
				from   
				tc_keet_prototipos_constructivos
				inner join tc_keet_constructivos on tc_keet_prototipos_constructivos.id_constructivo= tc_keet_constructivos.id_constructivo
				inner join tc_keet_grupos_constructivos on tc_keet_constructivos.id_grupo_constructivo= tc_keet_grupos_constructivos.id_grupo_constructivo
				where
          tc_keet_prototipos_constructivos.id_prototipo= {idPrototipo}
			</select>	
			<select id="constructivosSelect">
				select      
					tc_keet_constructivos.id_constructivo id_key,
					tc_keet_constructivos.nombre descripcion,
					tc_keet_grupos_constructivos.nombre grupo
				from   
				tc_keet_constructivos 
				inner join tc_keet_grupos_constructivos on tc_keet_constructivos.id_grupo_constructivo= tc_keet_grupos_constructivos.id_grupo_constructivo
				where
          {condicion}
				order by
				  tc_keet_grupos_constructivos.nombre, tc_keet_constructivos.nombre
			</select>
		  <select id="getPlanosEspecialidades">
				select 
					tc_keet_planos.id_plano id_key,
					tc_keet_planos.nombre descripcion,
					tc_keet_especialidades.nombre grupo 
				from
					tc_keet_planos
				inner join tc_keet_especialidades on tc_keet_planos.id_especialidad= tc_keet_especialidades.id_especialidad
        where
          {condicion}
				order by
					tc_keet_especialidades.nombre, tc_keet_planos.nombre
			</select>		
		  <select id="importados">
				select
					id_prototipo_archivo id_key,
					tc_keet_prototipos_archivos.nombre,
					tc_keet_prototipos_archivos.archivo,
					tc_keet_prototipos_archivos.ruta,
					tc_keet_prototipos_archivos.alias,
					tc_keet_prototipos_archivos.observaciones,
					tc_keet_prototipos_archivos.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_prototipos_archivos.id_tipo_archivo,
					tc_keet_especialidades.clave clave_especialidad,
					tc_keet_especialidades.nombre nombre_especialidad,
					tc_keet_planos.nombre nombre_plano
				from
					tc_keet_prototipos_archivos
				inner join 
					tc_janal_usuarios on tc_keet_prototipos_archivos.id_usuarios= tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join 
					tc_keet_planos on tc_keet_prototipos_archivos.id_plano = tc_keet_planos.id_plano
				inner join 
					tc_keet_especialidades on tc_keet_planos.id_especialidad = tc_keet_especialidades.id_especialidad
				where
				  id_prototipo= {idPrototipo}
			</select>		
		  <select id="getDias">
				select
					id_prototipo_dia id_key,
					nombre 
				 from
					 tc_keet_prototipos_dias
				 inner join tc_keet_nombres_dias on tc_keet_nombres_dias.id_nombre_dia= tc_keet_prototipos_dias.id_nombre_dia
				where
				  id_prototipo= {idPrototipo}
			</select>		
		</unit>
    <unit id="VistaProyectoDto">
			<select id="lazy">
				select 
          tc_keet_proyectos.id_proyecto id_key,
          tc_keet_proyectos.id_proyecto,
          tc_keet_proyectos.clave,
          tc_keet_proyectos.no_viviendas,
          tc_keet_proyectos.etapa,
          tc_mantic_clientes.razon_social,
          tc_keet_desarrollos.nombres desarrollo,
          tc_keet_tipos_obras.nombre tipo_obra,
					tc_keet_proyectos_estatus.id_proyecto_estatus,
					tc_keet_proyectos_estatus.nombre as estatus,
					tc_keet_proyectos_estatus.estatus_asociados,
					tc_keet_proyectos.registro
        from 
          tc_keet_proyectos
        inner join 
					tc_mantic_clientes on tc_mantic_clientes.id_cliente= tc_keet_proyectos.id_cliente
        inner join 
					tc_keet_desarrollos on tc_keet_desarrollos.id_desarrollo= tc_keet_proyectos.id_desarrollo
        inner join 
					tc_keet_tipos_obras on tc_keet_tipos_obras.id_tipo_obra= tc_keet_proyectos.id_tipos_obras
        inner join
          tc_keet_proyectos_estatus on tc_keet_proyectos_estatus.id_proyecto_estatus= tc_keet_proyectos.id_proyecto_estatus      
        where
          {condicion}
				{sortOrder}
			</select>	
			<select id="tiposObraPorDivision">
				select 
					tc_keet_tipos_obras.id_tipo_obra id_key,
					tc_keet_tipos_obras.nombre descripcion,
					tc_keet_divisiones.nombre grupo
				from tc_keet_tipos_obras
				inner join tc_keet_divisiones on tc_keet_tipos_obras.id_division= tc_keet_divisiones.id_division
				order by
				  tc_keet_divisiones.nombre, tc_keet_tipos_obras.nombre
			</select>	
		</unit>	
		<unit id="VistaProyectosArchivosDto">
			<select id="importados">
				select
					tc_keet_proyectos_archivos.id_proyecto_archivo id_key,
					tc_keet_proyectos_archivos.nombre,
					tc_keet_proyectos_archivos.archivo,
					tc_keet_proyectos_archivos.ruta,
					tc_keet_proyectos_archivos.alias,
					tc_keet_proyectos_archivos.observaciones,
					tc_keet_proyectos_archivos.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_proyectos_archivos.id_tipo_archivo,
					tc_keet_prototipos.clave clave_prototipo,
					tc_keet_prototipos.nombre nombre_prototipo,
					tc_keet_especialidades.clave clave_especialidad,
					tc_keet_especialidades.nombre nombre_especialidad,
					tc_keet_planos.nombre nombre_plano
				from
					tc_keet_proyectos_archivos
				inner join 
					tc_janal_usuarios on tc_keet_proyectos_archivos.id_usuario = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona = tc_mantic_personas.id_persona
				inner join 
					tc_keet_prototipos on tc_keet_proyectos_archivos.id_prototipo = tc_keet_prototipos.id_prototipo
				inner join 
					tc_keet_planos on tc_keet_proyectos_archivos.id_plano = tc_keet_planos.id_plano
				inner join 
					tc_keet_especialidades on tc_keet_planos.id_especialidad = tc_keet_especialidades.id_especialidad
				where
				  tc_keet_proyectos_archivos.id_proyecto= {idProyecto}
			</select>
		</unit>		
		<unit id="VistaProyectosGeneradoresDto">
			<select id="importados">
				select
					tc_keet_proyectos_generadores.id_proyecto_generador id_key,
					tc_keet_proyectos_generadores.nombre,
					tc_keet_proyectos_generadores.archivo,
					tc_keet_proyectos_generadores.ruta,
					tc_keet_proyectos_generadores.alias,
					tc_keet_proyectos_generadores.observaciones,
					tc_keet_proyectos_generadores.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_proyectos_generadores.id_tipo_archivo,
					tc_keet_tipos_generadores.clave clave_generador,
					tc_keet_tipos_generadores.nombre nombre_generador,
					tc_keet_estaciones.nombre nombre_estacion
				from
					tc_keet_proyectos_generadores
				inner join 
					tc_janal_usuarios on tc_keet_proyectos_generadores.id_usuario = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join 
					tc_keet_tipos_generadores on tc_keet_proyectos_generadores.id_tipo_generador = tc_keet_tipos_generadores.id_tipo_generador
				inner join 
					tc_keet_estaciones on tc_keet_tipos_generadores.id_estacion = tc_keet_estaciones.id_estacion
				where
				  tc_keet_proyectos_generadores.id_proyecto= {idProyecto}
			</select>
		</unit>		
		<unit id="VistaProyectosPresupuestosDto">
			<select id="importados">
				select
					tc_keet_proyectos_presupuestos.id_proyecto_presupuesto id_key,
					tc_keet_proyectos_presupuestos.nombre,
					tc_keet_proyectos_presupuestos.archivo,
					tc_keet_proyectos_presupuestos.ruta,
					tc_keet_proyectos_presupuestos.alias,
					tc_keet_proyectos_presupuestos.observaciones,
					tc_keet_proyectos_presupuestos.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_proyectos_presupuestos.id_tipo_archivo,
					tc_keet_tipos_presupuestos.nombre tipo_presupuesto
				from
					tc_keet_proyectos_presupuestos
				inner join 
					tc_janal_usuarios on tc_keet_proyectos_presupuestos.id_usuarios = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona = tc_mantic_personas.id_persona
				inner join
					tc_keet_tipos_presupuestos on tc_keet_proyectos_presupuestos.id_tipo_presupuesto = tc_keet_tipos_presupuestos.id_tipo_presupuesto
				where
				  tc_keet_proyectos_presupuestos.id_proyecto= {idProyecto}
			</select>
		</unit>		
		<unit id="VistaNombresDiasDto">
			<select id="dias">
				select      
          tc_keet_nombres_dias.id_nombre_dia as id_key,
					tc_keet_nombres_dias.*
        from      
          tc_keet_nombres_dias
				inner join 
					tc_keet_prototipos_dias on tc_keet_nombres_dias.id_nombre_dia = tc_keet_prototipos_dias.id_nombre_dia
        where 
          {condicion} 
			</select>
		</unit>
		<unit id="VistaProveedoresBancosDto">
			<select id="row">
				select 
					principal.*
				from(
				select 
				  tc_keet_proveedores_materiales.id_proveedor_material as id_key,
				  tc_mantic_articulos.id_articulo,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_principal= 1 and (upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*' or tc_mantic_articulos.id_articulo= {idArticulo})) as propio,
				  (select tc_mantic_articulos_codigos.codigo from tc_mantic_articulos_codigos where tc_mantic_articulos_codigos.id_articulo= tc_mantic_articulos.id_articulo and tc_mantic_articulos_codigos.id_proveedor= {idProveedor} and (upper(tc_mantic_articulos.nombre) regexp '.*{codigo}.*' or tc_mantic_articulos.id_articulo= {idArticulo})) as codigo,
				  tc_mantic_articulos.nombre,
				  '   ' as origen,
				  tc_mantic_articulos.descripcion,
				  tc_mantic_articulos.precio,
				  tc_mantic_articulos.precio as original,
				  tc_mantic_articulos.menudeo,
				  tc_mantic_articulos.medio_mayoreo,
				  tc_mantic_articulos.mayoreo,
				  tc_mantic_articulos.sat,
				  tc_mantic_articulos.limite_medio_mayoreo,
				  tc_mantic_articulos.limite_mayoreo,
				  tc_mantic_articulos.iva,
				  tc_mantic_articulos.id_redondear,
				  tc_mantic_unidades_medidas.nombre unidad_medida,
				  ifnull(tc_mantic_articulos.extra, '0') as morado,
				  concat(ifnull(tc_mantic_articulos.descuento, '0'), ',', ifnull(tc_mantic_articulos.extra, '0')) as porcentajes,
					tc_keet_proveedores_materiales.id_proveedor,
					tc_keet_proveedores_materiales.id_usuario,
					tc_keet_proveedores_materiales.registro,
					tc_keet_proveedores_materiales.id_proveedor_material
				from 
					tc_keet_proveedores_materiales
				inner join 
					tc_mantic_articulos on tc_keet_proveedores_materiales.id_articulo = tc_mantic_articulos.id_articulo
				inner join 
					tc_mantic_empresas on tc_mantic_articulos.id_empresa = tc_mantic_empresas.id_empresa
				inner join
					tr_mantic_empaque_unidad_medida on tc_mantic_articulos.id_empaque_unidad_medida = tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida
				inner join 
					tc_mantic_empaques on tr_mantic_empaque_unidad_medida.id_empaque = tc_mantic_empaques.id_empaque
				inner join 
					tc_mantic_unidades_medidas on tr_mantic_empaque_unidad_medida.id_unidad_medida = tc_mantic_unidades_medidas.id_unidad_medida
				where 
					tc_keet_proveedores_materiales.id_proveedor= {idProveedor}
					) principal 			
				order by 
				  nombre	
			</select>
		</unit>
		<unit id="VistaDesarrollosDto">
			<select id="lazy">
				select
          tc_keet_desarrollos.id_desarrollo as id_key,
          tc_keet_desarrollos.clave,
          tc_keet_desarrollos.nombres,
          tc_keet_desarrollos.registro,
          tc_keet_desarrollos.descripcion,
          tc_mantic_clientes.razon_social,
          concat(tc_mantic_domicilios.calle, ", ",tc_mantic_domicilios.numero_exterior) domicilio
        from
          tc_keet_desarrollos
        inner join tc_mantic_clientes on tc_mantic_clientes.id_cliente= tc_keet_desarrollos.id_cliente
        inner join tc_mantic_domicilios on tc_mantic_domicilios.id_domicilio= tc_keet_desarrollos.id_domicilio
				where
          {condicion}
		    order by
		      tc_keet_desarrollos.nombres
			</select>	
		</unit>
		<unit id="VistaContratosArchivosDto">
			<select id="importados">
				select
					tc_keet_contratos_archivos.id_contrato_archivo id_key,
					tc_keet_contratos_archivos.nombre,
					tc_keet_contratos_archivos.archivo,
					tc_keet_contratos_archivos.ruta,
					tc_keet_contratos_archivos.alias,
					tc_keet_contratos_archivos.observaciones,
					tc_keet_contratos_archivos.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_contratos_archivos.id_tipo_archivo,
					tc_keet_prototipos.clave clave_prototipo,
					tc_keet_prototipos.nombre nombre_prototipo,
					tc_keet_especialidades.clave clave_especialidad,
					tc_keet_especialidades.nombre nombre_especialidad,
					tc_keet_planos.nombre nombre_plano
				from
					tc_keet_contratos_archivos
				inner join 
					tc_janal_usuarios on tc_keet_contratos_archivos.id_usuario = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona = tc_mantic_personas.id_persona
				inner join 
					tc_keet_prototipos on tc_keet_contratos_archivos.id_prototipo = tc_keet_prototipos.id_prototipo
				inner join 
					tc_keet_planos on tc_keet_contratos_archivos.id_plano = tc_keet_planos.id_plano
				inner join 
					tc_keet_especialidades on tc_keet_planos.id_especialidad = tc_keet_especialidades.id_especialidad
				where
				  tc_keet_contratos_archivos.id_contrato= {idContrato}
			</select>
		</unit>		
		<unit id="VistaContratosGeneradoresDto">
			<select id="importados">
				select
					tc_keet_contratos_generadores.id_contrato_generador id_key,
					tc_keet_contratos_generadores.nombre,
					tc_keet_contratos_generadores.archivo,
					tc_keet_contratos_generadores.ruta,
					tc_keet_contratos_generadores.alias,
					tc_keet_contratos_generadores.observaciones,
					tc_keet_contratos_generadores.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_contratos_generadores.id_tipo_archivo,
					tc_keet_tipos_generadores.clave clave_generador,
					tc_keet_tipos_generadores.nombre nombre_generador,
					tc_keet_estaciones.nombre nombre_estacion
				from
					tc_keet_contratos_generadores
				inner join 
					tc_janal_usuarios on tc_keet_contratos_generadores.id_usuario = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona= tc_mantic_personas.id_persona
				inner join 
					tc_keet_tipos_generadores on tc_keet_contratos_generadores.id_tipo_generador = tc_keet_tipos_generadores.id_tipo_generador
				inner join 
					tc_keet_estaciones on tc_keet_tipos_generadores.id_estacion = tc_keet_estaciones.id_estacion
				where
				  tc_keet_contratos_generadores.id_contrato= {idContrato}
			</select>
		</unit>		
		<unit id="VistaContratosPresupuestosDto">
			<select id="importados">
				select
					tc_keet_contratos_presupuestos.id_contrato_presupuesto id_key,
					tc_keet_contratos_presupuestos.nombre,
					tc_keet_contratos_presupuestos.archivo,
					tc_keet_contratos_presupuestos.ruta,
					tc_keet_contratos_presupuestos.alias,
					tc_keet_contratos_presupuestos.observaciones,
					tc_keet_contratos_presupuestos.registro,
					concat(tc_mantic_personas.nombres,' ',tc_mantic_personas.paterno,' ',tc_mantic_personas.materno) usuario,
					tc_keet_contratos_presupuestos.id_tipo_archivo,
					tc_keet_tipos_presupuestos.nombre tipo_presupuesto
				from
					tc_keet_contratos_presupuestos
				inner join 
					tc_janal_usuarios on tc_keet_contratos_presupuestos.id_usuarios = tc_janal_usuarios.id_usuario
				inner join 
					tc_mantic_personas on tc_janal_usuarios.id_persona = tc_mantic_personas.id_persona
				inner join
					tc_keet_tipos_presupuestos on tc_keet_contratos_presupuestos.id_tipo_presupuesto = tc_keet_tipos_presupuestos.id_tipo_presupuesto
				where
				  tc_keet_contratos_presupuestos.id_contrato= {idContrato}
			</select>
		</unit>		
		<unit id="VistaEstacionesDto">
			<select id="lazy">
				select
					tc_keet_estaciones.id_estacion id_key,
          tc_keet_estaciones.nivel,
          tc_keet_estaciones.clave,
          tc_keet_estaciones.codigo,
					tc_keet_estaciones.nombre,
					tc_keet_estaciones.descripcion,
					tc_keet_estaciones.inicio,
					tc_keet_estaciones.termino,
					tc_keet_estaciones.cantidad,
					tc_keet_estaciones.costo,
					tc_keet_estaciones.ultimo,		
					tc_mantic_empaques.nombre empaque,
					tc_mantic_unidades_medidas.nombre medida
				from
          tc_keet_estaciones
				left join tr_mantic_empaque_unidad_medida on tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida= tc_keet_estaciones.id_empaque_unidad_medida
				left join tc_mantic_unidades_medidas on tc_mantic_unidades_medidas.id_unidad_medida= tr_mantic_empaque_unidad_medida.id_unidad_medida
				left join tc_mantic_empaques on tc_mantic_empaques.id_empaque= tr_mantic_empaque_unidad_medida.id_empaque
				where
					tc_keet_estaciones.clave like '{clave}%'
				and
					tc_keet_estaciones.nivel = {nivel}
		 	  order by
				  tc_mantic_empaques.nombre,
				  tc_mantic_unidades_medidas.nombre
			</select>		
		</unit>		
		<unit id="VistaEmpaqueUnidadDto">
			<select id="row">
				select
					tr_mantic_empaque_unidad_medida.id_empaque_unidad_medida id_key,
					tc_mantic_empaques.nombre empaque,
					tc_mantic_unidades_medidas.nombre medida
				from
				  tr_mantic_empaque_unidad_medida
				inner join tc_mantic_unidades_medidas on tc_mantic_unidades_medidas.id_unidad_medida= tr_mantic_empaque_unidad_medida.id_unidad_medida
				inner join tc_mantic_empaques on tc_mantic_empaques.id_empaque= tr_mantic_empaque_unidad_medida.id_empaque
		 	  order by
				  tc_mantic_empaques.nombre,
				  tc_mantic_unidades_medidas.nombre
			</select>		
		</unit>		
	</dml>    
</process>
