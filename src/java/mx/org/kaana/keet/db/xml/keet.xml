<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
    Relación de consultas para las tablas de KEET
-->
<process>
  <model>    
  </model>

  <dml>
    <unit id="TcKeetContratistasDepartamentosDto">
      <select id="row">
        select      
          tc_keet_contratistas_departamentos.id_contratista_departamento as id_key,
          tc_keet_contratistas_departamentos.*
        from      
          tc_keet_contratistas_departamentos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratistas_departamentos
        where      
          id_departamento = {idDepartamento} and id_empresa_persona = {idEmpresaPersona}
      </select>
      <select id="departamentos">
        select      
          tc_keet_contratistas_departamentos.id_departamento as id_key,
          tc_keet_contratistas_departamentos.*
        from      
          tc_keet_contratistas_departamentos
        where      
          id_empresa_persona = {idEmpresaPersona}
      </select>
			<select id="maximo">
				select      
          max(id_contratista_departamento) as maximo
        from      
          tc_keet_contratistas_departamentos
			</select>
			<delete id="rows">
				delete 
				  tc_keet_contratistas_departamentos 
				from
          tc_keet_contratistas_departamentos
        inner join
          tr_mantic_empresa_personal on tc_keet_contratistas_departamentos.id_empresa_persona= tr_mantic_empresa_personal.id_empresa_persona
        where
          tr_mantic_empresa_personal.id_persona= {idPersona}
			</delete>
    </unit>    
    <unit id="TcKeetPrototiposHabilesDto">
      <select id="row">
        select      
          tc_keet_prototipos_habiles.id_prototipo_habil as id_key,
					tc_keet_prototipos_habiles.*
        from      
          tc_keet_prototipos_habiles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prototipos_habiles
        where      
          id_nombre_dia = {idNombreDia} and id_prototipo = {idPrototipo}
      </select>
			<delete id="igual">
				delete from 
          tc_keet_prototipos_habiles 
        where 
          id_prototipo= {idPrototipo}
			</delete>
    </unit>    
    <unit id="TcKeetPrestamosLotesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_prestamos_lotes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_lotes
        where      
          id_prestamo = {idPrestamo} and id_estacion = {idEstacion}
      </select>
      <delete id="rows">
        delete tc_keet_prestamos_lotes from tc_keet_prestamos_lotes where id_prestamo= {idPrestamo} and id_pagado= 2
      </delete>
      <update id="rows">
        update tc_keet_prestamos_lotes set id_pagado= if((pagado{signo}{anticipo})> 0, 1, 2), pagado= (pagado{signo}{anticipo}) where id_estacion= {idEstacion}
      </update>  
    </unit>    
    <unit id="TcKeetAnticiposLotesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_lotes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_lotes
        where      
          id_anticipo = {idAnticipo} and id_estacion = {idEstacion}
      </select>
      <delete id="rows">
        delete tc_keet_anticipos_lotes from tc_keet_anticipos_lotes where id_anticipo = {idAnticipo} and id_pagado= 2
      </delete>
      <update id="rows">
        update tc_keet_anticipos_lotes set id_pagado= if((pagado{signo}{anticipo})> 0, 1, 2), pagado= (pagado{signo}{anticipo}) where id_estacion= {idEstacion}
      </update>  
    </unit>    
    <unit id="TcKeetPrestamosDetallesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_prestamos_detalles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_detalles
        where      
          id_prestamo_detalle = {idPrestamoDetalle}
      </select>
      <select id="incidentes">
        select      
          tc_keet_prestamos_detalles.id_prestamo_detalle as id_key,
          tc_keet_prestamos_detalles.*
        from      
          tc_keet_prestamos_detalles
        where      
          id_prestamo_pago = {idPrestamoPago}
      </select>
    </unit>    
    <unit id="TcKeetPrestamosControlesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_prestamos_controles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_controles
        where      
          id_prestamo_control = {idPrestamoControl}
      </select>
    </unit>    
    <unit id="TcKeetAnticiposDetallesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_detalles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_detalles
        where      
          id_anticipo_detalle = {idAnticipoDetalle}
      </select>
      <select id="incidentes">
        select      
          tc_keet_anticipos_detalles.id_anticipo_detalle as id_key,
          tc_keet_anticipos_detalles.*
        from      
          tc_keet_anticipos_detalles
        where      
          id_anticipo_pago = {idAnticipoPago}
      </select>
    </unit>    
    <unit id="TcKeetAnticiposControlesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_controles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_controles
        where      
          id_anticipo_control = {idAnticipoControl}
      </select>
    </unit>    
    <unit id="TcKeetMorososDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_morosos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_morosos
        where      
          id_proveedor = {idProveedor}
      </select>
    </unit>    
    <unit id="TcKeetIncidentesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_incidentes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_incidentes
        where      
          consecutivo = '{consecutivo}'
      </select>
      <select id="igual">
        select      
          tc_keet_incidentes.id_incidente as id_key,
          tc_keet_incidentes.*
        from      
          tc_keet_incidentes
        where      
          id_incidente= {idIncidente}
      </select>
			<select id="siguiente">
        select
					max(orden) + 1 as siguiente
				from 
					tc_keet_incidentes
				where
				  ejercicio= {ejercicio} 				  
				  and orden {operador} 900000
			</select>		
			<select id="existente">
				select 
					tc_keet_incidentes.id_incidente as id_key,
					tc_keet_incidentes.*
				from 
					tc_keet_incidentes
				where 
					id_proveedor= {idProveedor}
				  and id_tipo_incidente={idTipoIncidente}
				  and id_incidente_estatus in ({estatus})
				  and ('{fecha}' between tc_keet_incidentes.inicio and tc_keet_incidentes.termino)
			</select>
			<select id="prestamos">
				select 
					tc_keet_incidentes.id_incidente as id_key,
					tc_keet_incidentes.*
				from 
					tc_keet_incidentes
				where 
					id_anticipo= {idAnticipo}
          and id_incidente_estatus in (1,2,6)
			</select>
      <select id="incidente">
        select
          id_tipo_incidente, id_incidente_estatus, inicio, termino
        from  
          tc_keet_incidentes
        where
          now()&gt;= inicio
          and now()&lt;= termino
          and id_incidente_estatus in (1, 2, 3, 5, 6)
          and id_tipo_incidente in (1, 2, 3, 4, 5, 6, 9)
          and id_proveedor= {idProveedor}        
        order by
          id_tipo_incidente
      </select>  
			<delete id="rows">
				delete tc_keet_incidentes from tc_keet_incidentes where id_incidente= {idIncidente}
			</delete>
			<update id="nomina">
				update 
				  tc_keet_incidentes 
				set 
				  id_nomina= null 
				where 
				  id_nomina= {idNomina}
			</update>
			<update id="persona">
				update 
				  tc_keet_incidentes 
				set 
				  id_nomina= null 
				where 
				 id_nomina= {idNomina}
				 and id_proveedor= {idProveedor}
			</update>
			<delete id="persona">
				delete 
          tc_keet_incidentes
        from 
          tc_keet_incidentes
        inner join  
          tc_mantic_proveedores on tc_keet_incidentes.id_proveedor= tc_mantic_proveedores.id_proveedor
        where 
          tc_mantic_proveedores.id_proveedor= {idProveedor}
			</delete>      
    </unit>    
    <unit id="TcKeetIncidentesBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_incidentes_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_incidentes_bitacora
        where      
          id_incidente_bitacora = {idIncidenteBitacora}
      </select>
    </unit>    
    <unit id="TcKeetIncidentesEstatusDto">
			<select id="estatus">
        select      
				  tc_keet_incidentes_estatus.id_incidente_estatus as id_key,
          tc_keet_incidentes_estatus.*
        from      
          tc_keet_incidentes_estatus
        where 				  
				  id_incidente_estatus in ({estatusAsociados})
				order by 
				  id_incidente_estatus
      </select>
      <select id="row">
        select      
          *
        from      
          tc_keet_incidentes_estatus
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_incidentes_estatus
        where      
          nombre = '{nombre}'
      </select>
    </unit>    
    <unit id="TcKeetAnticiposDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos
        where      
          consecutivo = '{consecutivo}'
      </select>
      <select id="byId">
        select      
          tc_keet_anticipos.id_anticipo as id_key,
					tc_keet_anticipos.*
        from      
          tc_keet_anticipos
        where 
          id_anticipo= {idAnticipo} 
				order by
				  registro
      </select>
      <select id="activosByIdDeudor">
        select      
          tc_keet_anticipos.id_anticipo as id_key,
					tc_keet_anticipos.*
        from      
          tc_keet_anticipos
        where 
          id_anticipo= {idAnticipo} 
				  and id_anticipo_estatus in (1, 2)
				order by
				  registro
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_anticipos
				where				  
				  ejercicio = {ejercicio}			
			</select>	      
    </unit>    
    <unit id="TcKeetAnticiposArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_archivos
        where      
          id_anticipo_pago = {idAnticipoPago} and nombre = '{nombre}'
      </select>
    </unit>    
    <unit id="TcKeetAnticiposBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_bitacora
        where      
          id_anticipo_bitacora = {idAnticipoBitacora}
      </select>
    </unit>  
    <unit id="TcKeetAnticiposEstatusDto">
      <select id="row">
        select      
          tc_keet_anticipos_estatus.id_anticipo_estatus as id_key,
				  tc_keet_anticipos_estatus.*
        from      
          tc_keet_anticipos_estatus
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_estatus
        where      
          nombre = '{nombre}'
      </select>
    </unit>  
    <unit id="TcKeetAnticiposPagosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_anticipos_pagos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_anticipos_pagos
        where      
          consecutivo = '{consecutivo}'
      </select>
      <select id="byIdAnticipo">
        select      
          tc_keet_anticipos_pagos.id_anticipo_pago as id_key,
				  tc_keet_anticipos_pagos.*
        from      
          tc_keet_anticipos_pagos
        where 
          id_anticipo= {idAnticipo} 
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_anticipos_pagos
				where				  
				  ejercicio = {ejercicio}			
			</select>      
    </unit>        
    <unit id="TcKeetNominasDesarrollosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_desarrollos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_desarrollos
        where      
          id_desarrollo = {idDesarrollo} and id_empresa_persona = {idEmpresaPersona} and id_nomina = {idNomina}
      </select>
    </unit>    
    <unit id="TcKeetContratosRetencionesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_retenciones
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_retenciones
        where      
          id_contrato = {idContrato} and orden = {orden}
      </select>
      <select id="retenciones">
        select
          tc_keet_contratos_retenciones.id_contrato_retencion as id_key,
          tc_keet_contratos_retenciones.*
        from
          tc_keet_contratos_retenciones
        where
          id_contrato= {idContrato}  
        order by
          orden  
      </select>  
    </unit>    
    <unit id="TcKeetRubrosFotosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_rubros_fotos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_rubros_fotos
        where      
          nombre = '{nombre}'
      </select>
      <select id="fotos">
        select      
          tc_keet_rubros_fotos.id_rubro_foto as id_key,
          codigo,
          nombre
        from      
          tc_keet_rubros_fotos
        where      
          id_rubro= {idRubro}
        order by
          id_rubro
      </select>
    </unit>    
    <unit id="TcKeetErroresEstacionesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_errores_estaciones
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_errores_estaciones
        where      
          id_error_estacion = {idErrorEstacion}
      </select>
    </unit>    
    <unit id="TcKeetTiposGastosDto">
      <select id="row">
        select      
         tc_keet_tipos_gastos.id_tipo_gasto as id_key,
          tc_keet_tipos_gastos.*
        from      
          tc_keet_tipos_gastos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_gastos
        where      
          nombre = '{nombre}'
      </select>
    </unit>    
    <unit id="TcKeetVentasPagosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_ventas_pagos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_ventas_pagos
        where      
          id_detalle = {idDetalle} and id_venta = {idVenta}
      </select>
      <select id="siguiente">
        select      
          parcialidad+ 1 as parcialidad
        from      
          tc_keet_ventas_pagos
        where      
          id_detalle= {idVenta}
      </select>
			<select id="total">
				select
					truncate(sum(tc_keet_ventas_pagos.pagado), 1) as total
				from 
					tc_keet_ventas_pagos 
				where  
					id_venta = {idVenta}
			</select>
    </unit>
    <unit id="TcKeetVentasParcialesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_ventas_parciales
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_ventas_parciales
        where      
          id_contrato_lote = {idContratoLote} and id_venta = {idVenta}
      </select>
    </unit>    
    <unit id="TrKeetContratoDomicilioDto">
      <select id="row">
        select      
          *
        from      
          tr_keet_contrato_domicilio
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tr_keet_contrato_domicilio
        where      
          id_contrato = {idContrato} and id_tipo_domicilio = {idTipoDomicilio} and id_domicilio = {idDomicilio} and id_principal = {idPrincipal}
      </select>
    </unit>    
    <unit id="TcKeetSeriesDto">
      <select id="row">
        select      
          tc_keet_series.id_serie as id_key,
          tc_keet_series.*
        from      
          tc_keet_series
        where 
          id_tipo= {idTipo}
          and {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_series
        where      
          nombre = '{nombre}'
      </select>
      <select id="clave">
        select      
          tc_keet_series.id_serie as id_key,
          tc_keet_series.*
        from      
          tc_keet_series
        where      
          clave = '{clave}'
      </select>
    </unit>    
    <unit id="TcKeetTiposComprobantesDto">
      <select id="row">
        select      
          tc_keet_tipos_comprobantes.id_tipo_comprobante as id_key,
          tc_keet_tipos_comprobantes.*
        from      
          tc_keet_tipos_comprobantes
        where 
          id_tipo= {idTipo}
          and {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_comprobantes
        where      
          nombre = '{nombre}'
      </select>
      <select id="clave">
        select      
          tc_keet_tipos_comprobantes.id_tipo_comprobante as id_key,
          tc_keet_tipos_comprobantes.*
        from      
          tc_keet_tipos_comprobantes
        where      
          clave = '{clave}'
      </select>
    </unit>    
    <unit id="TcKeetNotasDirectosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_notas_directos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_notas_directos
        where      
          id_cliente = {idCliente} and id_desarrollo = {idDesarrollo} and id_contrato = {idContrato} and id_nota_entrada = {idNotaEntrada}
      </select>
      <delete id="rows">
         delete from 
           tc_keet_notas_directos
         where
           id_nota_entrada= {idNotaEntrada}
      </delete>
    </unit>    
    <unit id="TcKeetNotasManosObrasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_notas_manos_obras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_notas_manos_obras
        where      
          id_cliente = {idCliente} and id_desarrollo = {idDesarrollo} and id_empresa_persona = {idEmpresaPersona} and id_contrato = {idContrato} and id_nota_entrada = {idNotaEntrada}
      </select>
      <delete id="rows">
         delete from 
           tc_keet_notas_manos_obras
         where
           id_nota_entrada= {idNotaEntrada}
      </delete>
    </unit>    
    <unit id="TcKeetNotasContratosLotesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_notas_contratos_lotes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_notas_contratos_lotes
        where      
          id_familia = {idFamilia} and id_contrato_lote = {idContratoLote} and id_nota_entrada = {idNotaEntrada}
      </select>
      <select id="lotes">
        select      
          tc_keet_notas_contratos_lotes.id_nota_contrato_lote as id_key,
          tc_keet_notas_contratos_lotes.*
        from      
          tc_keet_notas_contratos_lotes
        where      
          id_nota_entrada = {idNotaEntrada}
      </select>
      <delete id="rows">
        delete from
          tc_keet_ordenes_contratos_lotes
        where
          id_nota_entrada = {idNotaEntrada}
      </delete>
    </unit>
    <unit id="TcKeetContratosPuntosResidentesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_puntos_residentes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_puntos_residentes
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_destajo_residente = {idContratoDestajoResidente}
      </select>
      <select id="puntoPivote">
        select 
					tc_keet_contratos_puntos_residentes.id_contrato_punto_residente as id_key,
          tc_keet_contratos_puntos_residentes.*
				from      
          tc_keet_contratos_puntos_residentes
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_destajo_residente = {idContratoDestajoResidente}
      </select>
      <delete id="rechazo">
        delete from      
          tc_keet_contratos_puntos_residentes
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_destajo_residente = {idContratoDestajoResidente}
      </delete>      
    </unit>    
    <unit id="TcKeetContratosResidentesArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_residentes_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_residentes_archivos
        where      
          archivo = '{archivo}'
      </select>
    </unit>    
    <unit id="TcKeetContratosRechazosResidentesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_rechazos_residentes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_rechazos_residentes
        where      
          id_contrato_rechazo_residente = {idContratoRechazoResidente}
      </select>
    </unit>    
    <unit id="TcKeetContratosDestajosResidentesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_destajos_residentes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_destajos_residentes
        where      
          id_contrato_destajo_residente = {idContratoDestajoResidente} and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
      <update id="nomina">
				update 
				  tc_keet_contratos_destajos_residentes
				set 
				  id_nomina= null 
				where 
				  id_nomina= {idNomina}
			</update>
      <update id="persona">
        update 
				  tc_keet_contratos_destajos_residentes
				inner join
				  tc_keet_contratos_lotes_residentes on tc_keet_contratos_destajos_residentes.id_contrato_lote_residente= tc_keet_contratos_lotes_residentes.id_contrato_lote_residente
				set 
				  tc_keet_contratos_destajos_residentes.id_nomina= null 
				where 
				  tc_keet_contratos_destajos_residentes.id_nomina= {idNomina}
				  and tc_keet_contratos_lotes_residentes.id_empresa_persona= {idEmpresaPersona}
			</update>
			<select id="evidenciaDestajo">
				select      
					tc_keet_contratos_destajos_residentes.id_contrato_destajo_residente as id_key,
          tc_keet_contratos_destajos_residentes.*
        from      
          tc_keet_contratos_destajos_residentes
        where 
          tc_keet_contratos_destajos_residentes.id_control= {idControl}
				  and tc_keet_contratos_destajos_residentes.id_contrato_lote_residente= {idContratoLoteResidente}
				  and tc_keet_contratos_destajos_residentes.id_control_estatus != {idControlEstatus}
			</select>		      
    </unit>    
    <unit id="TcKeetContratosLotesResidentesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_contratos_lotes_residentes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_lotes_residentes
        where      
          id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
      </select>
      <select id="existe">
        select      
          *
        from      
          tc_keet_contratos_lotes_residentes
        where      
          id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
      </select>
			<delete id="contratoLotePersona">
				delete from tc_keet_contratos_lotes_residentes where id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
			</delete>
			<delete id="depuracionCambioPerfil">
				delete from tc_keet_contratos_lotes_residentes where id_empresa_persona = {idEmpresaPersona}
			</delete>
			<select id="trabajoLotes">
				select count(*) total from tc_keet_contratos_lotes_residentes where id_empresa_persona={idEmpresaPersona} and id_trabajo=1
			</select>
    </unit>    
    <unit id="TcKeetControlesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_controles
        where 
          {condicion} 
				order by
				  clave 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_controles
        where      
          clave = '{clave}'
				order by
				  clave 
      </select>
      <select id="byId">
        select      
          tc_keet_controles.id_control as id_key,
					tc_keet_controles.*
        from      
          tc_keet_controles
        where 
          id_control= {idControl} 
				order by
				  clave 
      </select>
      <select id="byClaveNivel">
        select      
          tc_keet_controles.id_control as id_key,
					tc_keet_controles.*
        from      
          tc_keet_controles
        where 
          clave like '{clave}%'
				and
					nivel = {nivel}
				order by
				  clave 
      </select>
      <select id="getHijos">
        select      
          tc_keet_controles.id_control as id_key,
					tc_keet_controles.*
        from      
          tc_keet_controles
        where 
          clave like '{clave}%'
				and
					nivel &gt;= {nivel}
      </select>
			 <select id="maxClave">
        select      
          max(clave) clave
        from      
          tc_keet_controles
        where 
          clave like '{clave}%'
				  and nivel = {nivel}
      </select>
			<select id="minClave">
        select      
          min(clave) clave
        from      
          tc_keet_controles
        where 
          clave like '{clave}%'
				and
					nivel = {nivel}
      </select>
			<delete id="rows">
				delete
				  tc_keet_controles
			  from
				  tc_keet_controles
				where 
				 tc_keet_controles.clave like '{clave}%'
         and tc_keet_controles.nivel&gt; 4
			</delete>
			<update id="rows">
				update
				  tc_keet_controles
				set
				  abono_{semana}= abono_{anterior}- cargo_{anterior} 
				where
	        clave like '{clave}%'
			</update>
			<update id="abonos">
				update
				  tc_keet_controles
				set
				  abono_{semana}= costo 
				where
	        clave like '{clave}%'
			</update>      
    </unit>
    <unit id="TcKeetControlesBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_controles_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_controles_bitacora
        where      
          id_control_bitacora = {idControlBitacora} and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
    </unit>        
    <unit id="TcKeetControlesEstatusDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_controles_estatus
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_controles_estatus
        where      
          nombre = '{nombre}'
      </select>
			<select id="estatus">
				select 
				  id_control_estatus as id_key,
					nombre,
					estatus_asociados
				from 
				  tc_keet_controles_estatus
				where 
					{condicion}
			</select>
    </unit>    
		<unit id="TcKeetOrdenesContratosLotesDto">
      <select id="row">
        select      
					tc_keet_ordenes_contratos_lotes.id_orden_contrato_lote as id_key,
          tc_keet_ordenes_contratos_lotes.*
        from      
          tc_keet_ordenes_contratos_lotes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_ordenes_contratos_lotes
        where      
          id_familia = {idFamilia} and id_orden_compra = {idOrdenCompra} and id_contrato_lote = {idContratoLote}
      </select>
      <select id="lotes">
        select      
          tc_keet_ordenes_contratos_lotes.id_orden_contrato_lote as id_key,
          tc_keet_ordenes_contratos_lotes.*
        from      
          tc_keet_ordenes_contratos_lotes
        where      
          id_orden_compra = {idOrdenCompra}
      </select>
      <delete id="rows">
        delete from
          tc_keet_ordenes_contratos_lotes
        where
          id_orden_compra = {idOrdenCompra}
      </delete>
    </unit>
		<unit id="TcKeetProveedoresFamiliasDto">
      <select id="row">
        select      
					tc_keet_proveedores_familias.id_proveedor_familia as id_key,
          tc_keet_proveedores_familias.*
        from      
          tc_keet_proveedores_familias
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proveedores_familias
        where      
          id_proveedor = {idProveedor} and id_familia = {idFamilia} and id_proveedor_familia = {idProveedorFamilia}
      </select>
			<select id="maximo">
				select      
          max(id_proveedor_familia) maximo
        from      
          tc_keet_proveedores_familias
			</select>
			<delete id="rows">
        delete from tc_keet_proveedores_familias where id_proveedor = {idProveedor}
      </delete>
    </unit>
    <unit id="TcKeetGastosBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_gastos_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_gastos_bitacora
        where      
          id_gasto = {idGasto} and id_gasto_estatus = {idGastoEstatus} and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
    </unit>		
    <unit id="TcKeetCajasChicasDto">
      <select id="row">
        select      
          tc_keet_cajas_chicas.id_caja_chica as id_key,
          tc_keet_cajas_chicas.*
        from      
          tc_keet_cajas_chicas
        where 
          {condicion} 
        order by
          id_desarrollo
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_cajas_chicas
        where      
          id_desarrollo = {idDesarrollo}
      </select>
    </unit>
		<unit id="TcKeetCajasChicasCierresDto">
      <select id="row">
        select      
          tc_keet_cajas_chicas_cierres.id_caja_chica_cierre as id_key,
          tc_keet_cajas_chicas_cierres.*
        from      
          tc_keet_cajas_chicas_cierres
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_cajas_chicas_cierres
        where      
          consecutivo = '{consecutivo}'
      </select>
      <select id="ultima">
        select      
          tc_keet_cajas_chicas_cierres.id_caja_chica_cierre as id_key,
          tc_keet_cajas_chicas_cierres.*
        from      
          tc_keet_cajas_chicas_cierres
        where 
          id_caja_chica= {idCajaChica}
          and id_caja_chica_cierre_estatus in (1, 2)
          and id_nomina_periodo= {idNominaPeriodo}
        order by
          registro desc
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_cajas_chicas_cierres
				where				  
				  ejercicio = {ejercicio}			
			</select>			
    </unit>		
    <unit id="TcKeetCajasChicasCierresBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_cajas_chicas_cierres_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_cajas_chicas_cierres_bitacora
        where      
          id_caja_chica_cierre_bitacora = {idCajaChicaCierreBitacora}
      </select>
    </unit>		
		<unit id="TcKeetCajasChicasCierresEstatusDto">
			<select id="estatus">
				select 
				  id_caja_chica_cierre_estatus as id_key,
					nombre,
					estatus_asociados
				from 
				  tc_keet_cajas_chicas_cierres_estatus
				where 
					{condicion}
			</select>
		</unit>
     <unit id="TcKeetGastosDto">
      <select id="row">
        select      
          tc_keet_gastos.id_gasto as id_key,
					tc_keet_gastos.*
        from      
          tc_keet_gastos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_gastos
        where      
          consecutivo = '{consecutivo}' and id_gasto = {idGasto} and id_empresa = {idEmpresa}
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_gastos
				where				  
				  ejercicio = {ejercicio}			
			</select>
			<select id="ejercicios">
				select 
				  ejercicio as id_key, 
          ejercicio 
				from 
				  tc_keet_gastos 
				group by 
				  ejercicio desc
			</select>
			<update id="disponibles">
				update 
         tc_keet_gastos 
        set 
          id_caja_chica_cierre={idCajaNuevo} 
        where 
          id_caja_chica_cierre={idCajaAnterior} 
          and id_gasto_estatus=1
			</update>
			<update id="aplicado">
				update 
         tc_keet_gastos 
        set 
          id_gasto_estatus= 4
        where 
          id_caja_chica_cierre={idCajaAnterior} 
          and id_gasto_estatus= 2
			</update>
    </unit>
    <unit id="TcKeetGastosDetallesDto">
      <select id="row">
        select      
          tc_keet_gastos_detalles.id_gasto_detalle as id_key,
					tc_keet_gastos_detalles.*
        from      
          tc_keet_gastos_detalles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_gastos_detalles
        where      
          id_gasto = {idGasto} and codigo = '{codigo}' and id_articulo = {idArticulo} and id_gasto_detalle = {idGastoDetalle}
      </select>
			<delete id="rows">
        delete from tc_keet_gastos_detalles where id_gasto = {idGasto}
      </delete>
    </unit>
    <unit id="TcKeetGastosArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_gastos_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_gastos_archivos
        where      
          archivo = '{archivo}'
      </select>
    </unit>
		<unit id="TcKeetArticulosProveedoresDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_articulos_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_articulos_proveedores
        where      
          id_proveedor = {idProveedor} and id_articulo = {idArticulo}
      </select>
			<select id="maximo">
				select      
          max(id_articulo_proveedor) maximo
        from      
          tc_keet_articulos_proveedores
			</select>
			<delete id="rows">
        delete from tc_keet_articulos_proveedores where id_proveedor={idProveedor}
      </delete>
    </unit>		
    <unit id="TrKeetArticuloProveedorClienteDto">
      <select id="row">
        select      
          *
        from      
          tr_keet_articulo_proveedor_cliente
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tr_keet_articulo_proveedor_cliente
        where      
          precio_convenio = {precioConvenio} and id_proveedor = {idProveedor} and id_cliente = {idCliente} and id_articulo_proveedor_cliente = {idArticuloProveedorCliente} and id_articulo = {idArticulo}
      </select>    
      <select id="igual">
        select      
          *
        from      
          tr_keet_articulo_proveedor_cliente
        where      
          id_proveedor = {idProveedor} and id_cliente = {idCliente} and id_articulo = {idArticulo}
      </select>
			<select id="maximo">
				select      
          max(id_articulo_proveedor_cliente) maximo
        from      
          tr_keet_articulo_proveedor_cliente
			</select>
			<delete id="rows">
        delete from tr_keet_articulo_proveedor_cliente where id_proveedor={idProveedor}
      </delete>
    </unit>		
		<unit id="TcKeetTiposValesDto">
			<select id="row">
				select 
					tc_keet_tipos_vales.id_tipo_vale as id_key,
					tc_keet_tipos_vales.*
				from 
					tc_keet_tipos_vales
				where 
					{condicion}
			</select>
		</unit>
		<unit id="TcKeetValesMaterialesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales_materiales
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales_materiales
        where      
          id_vale_material = {idValeMaterial} and id_vale = {idVale} and id_material = {idMaterial}
      </select>
			<delete id="rows">
				delete from tc_keet_vales_materiales where id_vale= {idVale}
			</delete>			
    </unit>
		<unit id="TcKeetValesDetallesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales_detalles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales_detalles
        where      
          id_vale = {idVale} and id_articulo = {idArticulo} and id_vale_detalle = {idValeDetalle}
      </select>
			<select id="resumen">
				select
					id_articulo as id_key,
					id_vale, 					
					id_articulo,
					codigo,
					nombre,
					sum(precio) precio,
					sum(cantidad) cantidad,
					sum(costo) costo 
				from
					tc_keet_vales_detalles
				where
					id_vale= {idVale}
				group by					
					id_vale, 					
					id_articulo,
					codigo,
					nombre
			</select>
			<select id="entrega">
				select
					id_articulo as id_key,
					id_vale, 					
					id_articulo,
					codigo,
					nombre,
					sum(precio) precio,
					sum(cantidad) cantidad,
					sum(costo) costo 
				from
					tc_keet_vales_detalles
				where
					id_vale= {idVale} and entregado is null and id_tipo_entrega=4
				group by					
					id_vale, 					
					id_articulo,
					codigo,
					nombre
			</select>
			<select id="pendienteEntrega">
        select      
          *
        from      
          tc_keet_vales_detalles
        where 
          id_vale= {idVale} and entregado is null and id_tipo_entrega=4 and id_articulo={idArticulo}
      </select>
			<select id="pendienteEntregaTotal">
        select      
          count(*) total
        from      
          tc_keet_vales_detalles
        where 
          id_vale= {idVale} and entregado is null and id_tipo_entrega=4
      </select>
			<select id="evidencia">
				select
					id_articulo as id_key,
					id_vale, 					
					id_articulo,
					codigo,
					nombre,
					sum(precio) precio,
					sum(cantidad) cantidad,
					sum(costo) costo 
				from
					tc_keet_vales_detalles
				where
					id_vale= {idVale} and entregado is not null and id_tipo_entrega != 4
				group by					
					id_vale, 					
					id_articulo,
					codigo,
					nombre
			</select>
			<delete id="rows">
				delete from tc_keet_vales_detalles where id_vale= {idVale}
			</delete>
    </unit>
		<unit id="TcKeetValesDetallesEntregaDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales_detalles_entrega
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales_detalles_entrega
        where      
          id_vale = {idVale} and id_articulo = {idArticulo} and id_vale_detalle = {idValeDetalle} and clave='{clave}'
      </select>			
			<delete id="rows">
				delete from tc_keet_vales_detalles_entrega where id_vale= {idVale} and clave='{clave}'
			</delete>
    </unit>
		<unit id="TcKeetValesBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales_bitacora
        where      
          id_vale_bitacora = {idValeBitacora}
      </select>
			<delete id="rows">
				delete from tc_keet_vales_bitacora where id_vale= {idVale}
			</delete>
		</unit>		
		<unit id="TcKeetValesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales
        where      
          consecutivo = '{consecutivo}' and id_vale = {idVale}
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_vales
				where				  
				  ejercicio = {ejercicio}			
			</select>	
    </unit>
    <unit id="TcKeetMaterialesDto">
      <select id="row">
        select      
          tc_keet_materiales.id_material as id_key,
				  tc_keet_materiales.*
        from      
          tc_keet_materiales
        where 
          {condicion}
				order by
				  clave 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_materiales
        where      
          clave = '{clave}'
      </select>
      <delete id="rows">
				delete
				  tc_keet_materiales
			  from
				  tc_keet_materiales
				where 
				 tc_keet_materiales.clave like '{clave}%'
         and tc_keet_materiales.nivel> 4
			</delete>
			<update id="rows">
				update
				  tc_keet_materiales
				set
				  abono_{semana}= abono_{anterior}- cargo_{anterior} 
				where
	        clave like '{clave}%'
			</update>
			<update id="abonos">
				update
				  tc_keet_materiales
				set
				  abono_{semana}= costo 
				where
	        clave like '{clave}%'
			</update>
		</unit>
		<unit id="TcKeetContratosContratistasArchivosDto">
      <select id="row">
        select      
					tc_keet_contratos_contratistas_archivos.id_contrato_contratista_archivo as id_key,
          tc_keet_contratos_contratistas_archivos.*
        from      
          tc_keet_contratos_contratistas_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_contratistas_archivos
        where      
          id_contrato_contratista_archivo = {idContratoContratistaArchivo} and nombre = '{nombre}'
      </select>
    </unit>
		<unit id="TcKeetContratosProveedoresArchivosDto">
      <select id="row">
        select      
					tc_keet_contratos_proveedores_archivos.id_contrato_proveedor_archivo as id_key,
          tc_keet_contratos_proveedores_archivos.*
        from      
          tc_keet_contratos_proveedores_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_proveedores_archivos
        where      
          id_contrato_proveedor_archivo = {idContratoProveedorArchivo} and nombre = '{nombre}'
      </select>
    </unit>
    <unit id="TcKeetNominasPeriodosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where      
          orden = {orden} and ejercicio = {ejercicio}
      </select>
      <select id="ultimo">
        select      
          max(termino) as ultimo
        from      
          tc_keet_nominas_periodos
      </select>			
      <select id="semana">
        select      
          orden as semana
        from      
          tc_keet_nominas_periodos
				where
				  date_format(inicio, '%Y%m%d')&lt;= '{fecha}'
  				and date_format(termino, '%Y%m%d')&gt;= '{fecha}'
      </select>			
      <select id="semanaEnCurso">
        select      
          tc_keet_nominas_periodos.*
        from      
          tc_keet_nominas_periodos
				where
				  date_format(inicio, '%Y%m%d')&lt;= date_format('{fecha}','%Y%m%d')
  			  and date_format(termino, '%Y%m%d')&gt;= date_format('{fecha}','%Y%m%d')
      </select>			
      <select id="siguiente">
        select      
          tc_keet_nominas_periodos.*
        from      
          tc_keet_nominas_periodos
				where
				  id_nomina_periodo&gt;{idNominaPeriodo}
      </select>			
    </unit>		
		<unit id="TcKeetContratosLotesContratistasDto">
      <select id="row">
        select      
          tc_keet_contratos_lotes_contratistas.id_contrato_lote_contratista as id_key,
					tc_keet_contratos_lotes_contratistas.*
        from      
          tc_keet_contratos_lotes_contratistas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_lotes_contratistas
        where      
          id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
      </select>
      <select id="existe">
        select      
          *
        from      
          tc_keet_contratos_lotes_contratistas
        where      
          id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
      </select>
			<delete id="contratoLotePersona">
				delete from tc_keet_contratos_lotes_contratistas where id_empresa_persona = {idEmpresaPersona} and id_contrato_lote = {idContratoLote}
			</delete>
			<delete id="depuracionCambioPerfil">
				delete from tc_keet_contratos_lotes_contratistas where id_empresa_persona = {idEmpresaPersona}
			</delete>
			<select id="trabajoLotes">
				select count(*) total from tc_keet_contratos_lotes_contratistas where id_empresa_persona={idEmpresaPersona} and id_trabajo=1
			</select>
    </unit>
		<unit id="TcKeetDiasFestivosDto">
      <select id="row">
        select      
					tc_keet_dias_festivos.id_dia_festivo as id_key,
          tc_keet_dias_festivos.*
        from      
          tc_keet_dias_festivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_dias_festivos
        where      
          date_format(dia, '%Y%m%d') = '{dia}' and ejercicio = {ejercicio}
      </select>
    </unit>
		<unit id="TcKeetPrestamosDto">
      <select id="row">
        select      
          tc_keet_prestamos.id_prestamo as id_key,
					tc_keet_prestamos.*
        from      
          tc_keet_prestamos
        where 
          {condicion} 
      </select>
      <select id="byId">
        select      
          tc_keet_prestamos.id_prestamo as id_key,
					tc_keet_prestamos.*
        from      
          tc_keet_prestamos
        where 
          id_prestamo= {idPrestamo} 
				order by
				  registro
      </select>
      <select id="activosByIdDeudor">
        select      
          tc_keet_prestamos.id_prestamo as id_key,
					tc_keet_prestamos.*
        from      
          tc_keet_prestamos
        where 
          id_deudor= {idDeudor} 
				and
				  id_prestamo_estatus in (1,2)
				order by
				  registro
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_prestamos
				where				  
				  ejercicio = {ejercicio}			
			</select>			
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos
        where      
          id_prestamo = {idPrestamo}
      </select>
    </unit>
		<unit id="TcKeetDeudoresDto">
      <select id="row">
        select      
          tc_keet_deudores.id_deudor as id_key,
					tc_keet_deudores.*
        from      
          tc_keet_deudores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_deudores
        where      
          id_deudor = {idDeudor} and id_empresa_persona = {idEmpresaPersona}
      </select>
			<delete id="persona">
				delete 
          tc_keet_deudores
        from 
          tc_keet_deudores
        inner join  
          tr_mantic_empresa_personal on tc_keet_deudores.id_empresa_persona= tr_mantic_empresa_personal.id_empresa_persona
        where 
          tr_mantic_empresa_personal.id_persona= {idPersona}
			</delete>
    </unit>
    <unit id="TcKeetClientesPortalesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_clientes_portales
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_clientes_portales
        where      
          pagina = '{pagina}' and id_cliente = {idCliente}
      </select>
    </unit>		
    <unit id="TcKeetClientesBancosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_clientes_bancos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_clientes_bancos
        where      
          id_cliente = {idCliente} and clave_referencia = '{claveReferencia}' and convenio_cuenta = '{convenioCuenta}' and id_tipo_cuenta = {idTipoCuenta} and id_banco = {idBanco}
      </select>
			<select id="maximo">
				select      
          max(id_cliente_banco) maximo
        from      
          tc_keet_clientes_bancos
			</select>
    </unit>		
    <unit id="TcKeetTiposInfraestructurasDto">
      <select id="row">
        select      
          tc_keet_tipos_infraestructuras.id_tipo_infraestructura as id_key,
					tc_keet_tipos_infraestructuras.*
        from      
          tc_keet_tipos_infraestructuras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_infraestructuras
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposViviendasDto">
      <select id="row">
        select      
          tc_keet_tipos_viviendas.id_tipo_vivienda as id_key,
					tc_keet_tipos_viviendas.*
        from      
          tc_keet_tipos_viviendas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_viviendas
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposBancariosDto">
      <select id="row">
        select      
          tc_keet_tipos_bancarios.id_tipo_bancario as id_key,
					tc_keet_tipos_bancarios.*
        from      
          tc_keet_tipos_bancarios
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_bancarios
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposRelacionesDto">
      <select id="row">
        select      
          tc_keet_tipos_relaciones.id_tipo_relacion as id_key,
					tc_keet_tipos_relaciones.*
        from      
          tc_keet_tipos_relaciones
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_relaciones
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposGeneradoresDto">
      <select id="row">
        select      
          tc_keet_tipos_generadores.id_tipo_generador as id_key,
					tc_keet_tipos_generadores.*
        from      
          tc_keet_tipos_generadores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_generadores
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetProyectosGeneradoresDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_proyectos_generadores
        where 
          {condicion} 
      </select>
			<select id="toContratos">
        select 
					-1 id_contrato_generador,
					id_tipo_generador,
					id_tipo_archivo,
					nombre,
					archivo,
					ruta,
					tamanio,
					observaciones,
				  {idUsuario} id_usuario,
				  {idContrato} id_contrato,
				  replace(alias,'proyecto', 'contrato') alias
				 from
					 tc_keet_proyectos_generadores
				where
					id_proyecto= {idProyecto}
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_generadores
        where      
          id_tipo_generador = {idTipoGenerador} and id_proyecto = {idProyecto} and id_tipo_archivo = {idTipoArchivo} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetProyectosPrespuestosDto">
      <select id="row">
        select
          tc_keet_proyectos_presupuestos.id_proyecto_presupuesto as id_key,
					tc_keet_proyectos_presupuestos.*
        from
          tc_keet_proyectos_presupuestos
        where 
          {condicion} 
      </select>
			<select id="toContratos">
        select 
					-1 id_contrato_presupuesto,
					id_tipo_presupuesto,
					id_tipo_archivo,
					nombre,
					archivo,
					ruta,
					tamanio,
					observaciones,
				  {idUsuario} id_usuario,
				  {idContrato} id_contrato,
				  replace(alias,'proyecto', 'contrato') alias
				 from
					 tc_keet_proyectos_presupuestos
				where
					id_proyecto= {idProyecto}
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_presupuestos
        where      
          id_proyecto = {idProyecto} and id_tipo_archivo = {idTipoArchivo} and id_tipo_presupuesto = {idTipoPresupuesto} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetProyectosDto">
      <select id="row">
        select      
          tc_keet_proyectos.id_proyecto id_key,
          tc_keet_proyectos.*
        from      
          tc_keet_proyectos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos
        where      
          consecutivo = '{consecutivo}'
      </select>
			<select id="byId">
        select      
				  tc_keet_proyectos.id_proyecto id_key,
          tc_keet_proyectos.*
        from      
          tc_keet_proyectos
        where 
          id_proyecto= {idProyecto}
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_proyectos
				where				  
				  ejercicio = {ejercicio}			
			</select>			
    </unit>		
    <unit id="TcKeetProyectosLotesDto">
      <select id="row">
        select      
				  tc_keet_proyectos_lotes.id_proyecto_lote id_key,
          tc_keet_proyectos_lotes.*
        from      
          tc_keet_proyectos_lotes
        where 
          {condicion} 
      </select>
      <select id="byProyecto">
        select      
				  tc_keet_proyectos_lotes.id_proyecto_lote id_key,
          tc_keet_proyectos_lotes.*
        from      
          tc_keet_proyectos_lotes
        where 
          id_proyecto= {idProyecto} 
        order by
          id_proyecto_lote
      </select>
      <select id="siguiente">
        select      
				  max(orden)+ 1 as siguiente
        from      
          tc_keet_proyectos_lotes
        where 
          id_proyecto= {idProyecto} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_lotes
        where      
          manzana = '{manzana}' and id_proyecto = {idProyecto} and lote = '{lote}'
      </select>
    </unit>
		<unit id="TcKeetPrototiposDto">
      <select id="row">
        select      
				  tc_keet_prototipos.id_prototipo id_key,
          tc_keet_prototipos.*
        from      
          tc_keet_prototipos
        where 
          {condicion} 
      </select>
			<select id="byId">
        select      
				  tc_keet_prototipos.id_prototipo id_key,
          tc_keet_prototipos.*
        from      
          tc_keet_prototipos
        where 
          id_prototipo= {idPrototipo} 
      </select>
			<select id="byCliente">
        select      
				  tc_keet_prototipos.id_prototipo id_key,
          tc_keet_prototipos.*
        from      
          tc_keet_prototipos
        where 
          id_cliente= {idCliente}
				order by
				  nombre 
      </select>
			<select id="byEmpresa">
        select      
				  tc_keet_prototipos.id_prototipo id_key,
          tc_keet_prototipos.*
        from      
          tc_keet_prototipos
        where 
          id_empresa in ({sucursales})
				order by
				  nombre 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prototipos
        where      
          id_cliente = {idCliente} and nombre = '{nombre}'
      </select>
    </unit>		
		<unit id="TcKeetPrototiposConstructivosDto">
			<select id="row">
				select      
				  *
				from      
				  tc_keet_prototipos_constructivos
				where 
				  {condicion} 
			</select>
			<select id="identically">
				select      
				  *
				from      
				  tc_keet_prototipos_constructivos
				where      
				  id_constructivo = {idConstructivo} and id_prototipo = {idPrototipo}
			</select>
			<select id="maximo">
        select      
          max(id_prototipo_constructivo) maximo
        from      
          tc_keet_prototipos_constructivos
      </select>
		</unit>		
    <unit id="TcKeetPrototiposArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_prototipos_archivos
        where 
          {condicion} 
      </select>
      <select id="toProyectos">
        select 
					-1 id_proyecto_archivo,
					id_prototipo,
					id_plano,
					id_tipo_archivo,
					nombre,
					archivo,
					ruta,
					alias,
					tamanio,
					observaciones
				 from
					 tc_keet_prototipos_archivos
				where
					id_prototipo= {idPrototipo}
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prototipos_archivos
        where      
          id_plano = {idPlano} and id_prototipo = {idPrototipo} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposAtributosDto">
      <select id="row">
        select      
          tc_keet_tipos_atributos.id_tipo_atributo as id_key,
					tc_keet_tipos_atributos.*
        from      
          tc_keet_tipos_atributos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_atributos
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposFachadasDto">
      <select id="row">
        select      
          tc_keet_tipos_fachadas.id_tipo_fachada as id_key,
					tc_keet_tipos_fachadas.*
        from      
          tc_keet_tipos_fachadas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_fachadas
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposObrasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_tipos_obras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_obras
        where      
          id_tipo_obra = {idTipoObra} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposObrasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_tipos_obras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_obras
        where      
          nombre = '{nombre}' and id_division = {idDivision}
      </select>
    </unit>		
    <unit id="TcKeetTiposPresupuestosDto">
      <select id="row">
        select      
          tc_keet_tipos_presupuestos.id_tipo_presupuesto as id_key, 
					tc_keet_tipos_presupuestos.*
        from      
          tc_keet_tipos_presupuestos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_presupuestos
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetEstacionesDto">
      <select id="totales">
        select
          tc_keet_estaciones.id_estacion as id_key,
          sum(case when tc_keet_estaciones.id_estacion_estatus = 1 then 1 else 0 end) as iniciados,
          sum(case when tc_keet_estaciones.id_estacion_estatus = 2 then 1 else 0 end) as en_proceso,
          sum(case when tc_keet_estaciones.id_estacion_estatus = 3 then 1 else 0 end) as terminados,
          sum(case when tc_keet_estaciones.id_estacion_estatus = 4 then 1 else 0 end) as cancelados,
          count(*) as total
        from
          tc_keet_estaciones         
        where
          clave like '{clave}%' 
          and nivel= {nivel}
        group by
          substring(tc_keet_estaciones.clave, 1, {longitud})
        order by
           clave        
      </select>  
      <select id="row">
        select      
          tc_keet_estaciones.id_estacion as id_key,
					tc_keet_estaciones.*
        from      
          tc_keet_estaciones
        where 
          {condicion}
				order by
				  clave 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_estaciones
        where      
          clave = '{clave}'
				order by
				  clave 
      </select>
      <select id="byId">
        select      
          tc_keet_estaciones.id_estacion as id_key,
					tc_keet_estaciones.*
        from      
          tc_keet_estaciones
        where 
          id_estacion= {idEstacion} 
				order by
				  clave 
      </select>
      <select id="byClaveNivel">
        select      
          tc_keet_estaciones.id_estacion as id_key,
					tc_keet_estaciones.*
        from      
          tc_keet_estaciones
        where 
          clave like '{clave}%'
				and
					nivel = {nivel}
				order by
				  clave 
      </select>
      <select id="getHijos">
        select      
          tc_keet_estaciones.id_estacion as id_key,
					tc_keet_estaciones.*
        from      
          tc_keet_estaciones
        where 
          clave like '{clave}%'
				  and nivel &gt;= {nivel}
      </select>
			 <select id="maxClave">
        select      
          max(clave) clave
        from      
          tc_keet_estaciones
        where 
          clave like '{clave}%'
				and
					nivel = {nivel}
      </select>
			<select id="minClave">
        select      
          min(clave) clave
        from      
          tc_keet_estaciones
        where 
          clave like '{clave}%'
				  and nivel = {nivel}
      </select>
			<delete id="rows">
				delete
				  tc_keet_estaciones
			  from
				  tc_keet_estaciones
				where 
				 tc_keet_estaciones.clave like '{clave}%'
         and tc_keet_estaciones.nivel> 4
			</delete>
			<update id="rows">
				update
				  tc_keet_estaciones
				set
				  abono_{semana}= abono_{anterior}- cargo_{anterior} 
				where
	        clave like '{clave}%'
			</update>
			<update id="abonos">
				update
				  tc_keet_estaciones
				set
				  abono_{semana}= costo 
				where
	        clave like '{clave}%'
			</update>
			<update id="periodo">
				update
				  tc_keet_estaciones
				set
				  inicio= date_format('{inicio}', '%Y%m%d'),
          termino= date_format('{termino}', '%Y%m%d')
				where
	        clave= '{clave}'
          and nivel= 4
			</update>
			<update id="fechas">
				update
				  tc_keet_estaciones
				set
				  inicio= date_format('{inicio}', '%Y%m%d'),
          termino= date_format('{termino}', '%Y%m%d')
				where
	        clave like '{clave}%'
          and (nivel= 5 or nivel= 6)
			</update>
    </unit>		
    <unit id="TcKeetEspecialidadesDto">
      <select id="row">
        select      
          tc_keet_especialidades.id_especialidad as id_key,
					tc_keet_especialidades.*
        from      
          tc_keet_especialidades
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_especialidades
        where      
          nombre = '{nombre}'
      </select>
    </unit>
    <unit id="TcKeetPlanosDto">
      <select id="row">
        select      
          tc_keet_planos.id_plano as id_key,
					tc_keet_planos.*
        from      
          tc_keet_planos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_planos
        where      
          id_especialidad = {idEspecialidad} and nombre = '{nombre}'
      </select>
    </unit>				
    <unit id="TcKeetGruposConstructivosDto">
      <select id="row">
        select      
          tc_keet_grupos_constructivos.id_grupo_constructivo as id_key,
					tc_keet_grupos_constructivos.*
        from      
          tc_keet_grupos_constructivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_grupos_constructivos
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetConstructivosDto">
      <select id="row">
        select      
          tc_keet_constructivos.id_constructivo id_key,
          tc_keet_constructivos.*
        from      
          tc_keet_constructivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_constructivos
        where      
          id_grupo_constructivo = {idGrupoConstructivo} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetFamiliasDto">
      <select id="row">
        select      
          tc_keet_familias.id_familia as id_key,
					tc_keet_familias.*
        from      
          tc_keet_familias
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_familias
        where      
          nombre = '{nombre}'
      </select>
      <select id="familias">
        select      
          tc_keet_familias.id_familia as id_key,
					tc_keet_familias.*
        from      
          tc_keet_familias
        order by 
          nombre
      </select>
			<select id="siguiente">
        select      
          *
        from      
          tc_keet_familias
				where
          id_familia = {idFamilia}
      </select>
    </unit>		
    <unit id="TcKeetBitacorasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_bitacoras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_bitacoras
        where      
          id_bitacora = {idBitacora}
      </select>
			<select id="bitacora">
				select 
					tc_keet_bitacoras.id_bitacora AS id_key,
					tc_keet_bitacoras.id_bitacora,
					tc_keet_bitacoras.proceso,
					tc_keet_bitacoras.tabla,
					tc_keet_bitacoras.campo,
					tc_keet_bitacoras.antes,
					tc_keet_bitacoras.despues,
					tc_keet_bitacoras.id_key as id_principal,
					tc_keet_bitacoras.id_usuario,
					tc_keet_bitacoras.registro
				from 
					tc_keet_bitacoras
				where 
					proceso= '{proceso}'
				and 
					campo= '{campo}'
				and 
					id_key= {idKey}
			</select>				
    </unit>		
    <unit id="TcKeetBitacorasAliasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_bitacoras_alias
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_bitacoras_alias
        where      
          alias = '{alias}' and tabla = '{tabla}' and campo = '{campo}'
      </select>
    </unit>		
    <unit id="TcKeetDepartamentosDto">
      <select id="row">
        select      
          tc_keet_departamentos.id_departamento as id_key,
					tc_keet_departamentos.*
        from      
          tc_keet_departamentos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_departamentos
        where      
          nombre = '{nombre}'
      </select>
      <select id="especialidades">
        select      
          tc_keet_departamentos.id_departamento as id_key,
					tc_keet_departamentos.*
        from      
          tc_keet_departamentos
        where 
          id_especialidad= 1
				order by
				  nombre 
      </select>
      <select id="residentes">
        select      
          tc_keet_departamentos.id_departamento as id_key,
					tc_keet_departamentos.*
        from      
          tc_keet_departamentos
        where 
          id_departamento in (1, 21)
				order by
				  nombre 
      </select>
      <select id="igual">
        select      
          *
        from      
          tc_keet_departamentos
        where      
          nombre = '{nombre}'
      </select>
		</unit>	
    <unit id="TcKeetDivisionesDto">
      <select id="row">
        select      
          tc_keet_divisiones.id_division as id_key,
					tc_keet_divisiones.*
        from      
          tc_keet_divisiones
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_divisiones
        where      
          nombre = '{nombre}'
      </select>
    </unit>	
    <unit id="TcKeetDesarrollosDto">
      <select id="row">
        select      
          tc_keet_desarrollos.id_desarrollo id_key,
				  tc_keet_desarrollos.*
        from      
          tc_keet_desarrollos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_desarrollos
        where      
          clave = '{clave}' and nombres = '{nombres}'
      </select>
      <select id="byId">
        select      
          tc_keet_desarrollos.id_desarrollo as id_key,
				  tc_keet_desarrollos.*
        from      
          tc_keet_desarrollos
        where 
          id_desarrollo= {idDesarrollo} 
      </select>
      <select id="empresa">
        select      
          tc_keet_desarrollos.id_desarrollo as id_key,
          tc_mantic_clientes.id_empresa,
				  tc_keet_desarrollos.*
        from      
          tc_keet_desarrollos
        inner join
          tc_mantic_clientes on tc_keet_desarrollos.id_cliente= tc_mantic_clientes.id_cliente
        where 
          tc_mantic_clientes.id_empresa= {idEmpresa} 
      </select>
      <select id="cliente">
        select      
          tc_keet_desarrollos.id_desarrollo as id_key,
				  tc_keet_desarrollos.*
        from      
          tc_keet_desarrollos
        where 
          tc_keet_desarrollos.id_cliente= {idCliente} 
      </select>
    </unit>	
    <unit id="TcKeetNominasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas
        where      
          id_nomina_periodo = {idNominaPeriodo} and id_empresa = {idEmpresa} and id_tipo_nomina = {idTipoNomina}
      </select>
      <select id="ultima">
        select      
          *
        from      
          tc_keet_nominas
        where      
				  id_empresa in ({sucursales})
          and id_tipo_nomina = 1
				  and id_nomina_estatus in (1, 2, 3, 4)
			  order by
				  id_nomina_estatus desc
      </select>
      <select id="existe">
        select      
          tc_keet_nominas.id_nomina as id_key,
				  tc_keet_nominas.*
        from      
          tc_keet_nominas
        where      
				  id_empresa in ({sucursales})
          and id_tipo_nomina = 1
				  and id_nomina_estatus= 5
      </select>
    </unit>		
    <unit id="TcKeetNominasBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_bitacora
        where      
          id_nomina_bitacota = {idNominaBitacota}
      </select>
    </unit>		
    <unit id="TcKeetNominasConceptosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_conceptos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_conceptos
        where      
          id_tipo_concepto = {idTipoConcepto} and id_activo = {idActivo} and clave = '{clave}' and nombre = '{nombre}'
      </select>
      <select id="todos">
        select      
          *
        from      
          tc_keet_nominas_conceptos
        where  
				  id_cargar= 1
				  and id_activo= 1
				  and (aplicar= '*' or position('|{semana}|' in aplicar)> 0)
        order by
				  clave 
      </select>
      <select id="personales">
        select      
          *
        from      
          tc_keet_nominas_conceptos
        where  
				  id_cargar= 2
				  and id_activo= 1
        order by
				  clave 
      </select>
    </unit>
    <unit id="TcKeetNominasConstantesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_constantes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_constantes
        where      
          id_activo = {idActivo} and siglas = '{siglas}' and nombre = '{nombre}'
      </select>
			<select id="periodo">
				select
					siglas,
					nombre,
					valor
				from
					tc_keet_nominas_constantes
				where 
					date_format(inicio, '%Y%m%d')&lt;= '{fecha}'
					and date_format(termino, '%Y%m%d')&gt;= '{fecha}'
					and id_calcular= 1
				order by
					siglas			
			</select>
			<select id="todos">
				select
					siglas,
					nombre,
					valor
				from
					tc_keet_nominas_constantes
				where 
					id_activo= 1
				order by
					siglas			
			</select>
    </unit>		
    <unit id="TcKeetNominasEstatusDto">
      <select id="row">
        select      
				  tc_keet_nominas_estatus.id_nomina_estatus as id_key,
          tc_keet_nominas_estatus.*
        from      
          tc_keet_nominas_estatus
        where 
          {condicion} 
      </select>
      <select id="todos">
        select      
				  tc_keet_nominas_estatus.id_nomina_estatus as id_key,
          tc_keet_nominas_estatus.*
        from      
          tc_keet_nominas_estatus
        where 
          id_nomina_estatus in (1, 2, 3, 4)
      </select>
			<select id="identically">
        select      
          *
        from      
          tc_keet_nominas_estatus
        where      
          nombre = '{nombre}'
      </select>
      <select id="estatus">
        select      
				  tc_keet_nominas_estatus.id_nomina_estatus as id_key,
          tc_keet_nominas_estatus.*
        from      
          tc_keet_nominas_estatus
        where 				  
				  id_nomina_estatus in ({estatusAsociados})
				order by 
				  id_nomina_estatus
      </select>    
		</unit>		
    <unit id="TcKeetNominasPeriodosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where      
          orden = {orden} and ejercicio = {ejercicio}
      </select>
      <select id="siguiente">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where      
          id_nomina_periodo> {idNominaPeriodo}
				order by
			    id_nomina_periodo	
      </select>
      <select id="igual">
        select      
          *
        from      
          tc_keet_nominas_periodos
        where      
          id_nomina_periodo= {idNominaPeriodo}
				order by
			    id_nomina_periodo	
      </select>
    </unit>							
    <unit id="TcKeetNominasPersonasDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_personas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_personas
        where      
          id_nomina= {idNomina} 
				  and id_empresa_persona= {idEmpresaPersona}
      </select>
			<select id="personas">
			  select
					tc_keet_nominas_personas.id_nomina,
					count(*) as personas,
					sum(tc_keet_nominas_personas.aportaciones) as aportaciones,
					sum(tc_keet_nominas_personas.deducciones) as deducciones,
					sum(tc_keet_nominas_personas.percepciones) as percepciones,
					sum(tc_keet_nominas_personas.neto) as neto
				from
					tc_keet_nominas_personas
				where
					tc_keet_nominas_personas.id_nomina= {idNomina}
				group by
					tc_keet_nominas_personas.id_nomina				
			</select>
			<select id="desarrollo">
				select 
				  tc_keet_nominas_personas.id_empresa_persona as id_key,
          tc_keet_nominas_personas.id_empresa_persona
				from 
				  tc_keet_nominas_personas
				where 
				  id_nomina= {idNomina}
			</select>
			<delete id="nomina">
				delete 
				  tc_keet_nominas_personas
				from 
				  tc_keet_nominas_personas
				where 
				  id_nomina= {idNomina}
			</delete>
			<delete id="persona">
				delete 
				  tc_keet_nominas_personas
				from
				  tc_keet_nominas_personas
				where 
				  id_nomina= {idNomina} 
				  and id_empresa_persona= {idEmpresaPersona}
			</delete>
    </unit>		
    <unit id="TcKeetNominasDetallesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_detalles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_detalles
        where      
          id_nomina_concepto = {idNominaConcepto} and id_nomina_persona = {idNominaPersona}
      </select>
			<delete id="nomina">
				delete
				  tc_keet_nominas_detalles 
				from 
				  tc_keet_nominas_detalles 
			  inner join
				  tc_keet_nominas_personas on tc_keet_nominas_detalles.id_nomina_persona= tc_keet_nominas_personas.id_nomina_persona
			  inner join
				  tc_keet_nominas on tc_keet_nominas_personas.id_nomina= tc_keet_nominas.id_nomina
				where 
				  tc_keet_nominas.id_nomina= {idNomina}
			</delete>
			<delete id="persona">
				delete
				  tc_keet_nominas_detalles 
				from 
				  tc_keet_nominas_detalles 
			  inner join
				  tc_keet_nominas_personas on tc_keet_nominas_detalles.id_nomina_persona= tc_keet_nominas_personas.id_nomina_persona
			  inner join
				  tc_keet_nominas on tc_keet_nominas_personas.id_nomina= tc_keet_nominas.id_nomina
				where 
				  tc_keet_nominas.id_nomina= {idNomina}
				  and tc_keet_nominas_personas.id_empresa_persona= {idEmpresaPersona}
			</delete>
    </unit>
    <unit id="TcKeetNominasProveedoresDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_proveedores
        where      
          id_proveedor = {idProveedor} and id_nomina = {idNomina}
      </select>
			<select id="proveedores">
				select
					tc_keet_nominas_proveedores.id_nomina,
					count(*) as proveedores,
					sum(tc_keet_nominas_proveedores.subtotal) as subtotal,
					sum(tc_keet_nominas_proveedores.iva) as iva,
					sum(tc_keet_nominas_proveedores.total) as total
				from
					tc_keet_nominas_proveedores
				where
					tc_keet_nominas_proveedores.id_nomina= {idNomina}
				group by
					tc_keet_nominas_proveedores.id_nomina		
			</select>
			<delete id="nomina">
				delete 
				  tc_keet_nominas_proveedores 
			  from 	
			    tc_keet_nominas_proveedores 
				where 
				  id_nomina= {idNomina}				
			</delete>
			<delete id="proveedor">
				delete 
				  tc_keet_nominas_proveedores 
			  from 	
			    tc_keet_nominas_proveedores 
				where 
				  id_nomina= {idNomina}
				  and id_proveedor= {idProveedor}
			</delete>
    </unit>		
    <unit id="TcKeetNominasRubrosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_nominas_rubros
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_nominas_rubros
        where      
          id_nomina_proveedor = {idNominaProveedor} and id_rubro = {idRubro} and lote = '{lote}'
      </select>
			<delete id="nomina">
				delete
				  tc_keet_nominas_rubros 
				from 
				  tc_keet_nominas_rubros 
			  inner join
				  tc_keet_nominas_proveedores on tc_keet_nominas_rubros.id_nomina_proveedor= tc_keet_nominas_proveedores.id_nomina_proveedor
			  inner join
				  tc_keet_nominas on tc_keet_nominas_proveedores.id_nomina= tc_keet_nominas.id_nomina
				where 
				  tc_keet_nominas.id_nomina= {idNomina}				
			</delete>
			<delete id="proveedor">
				delete
				  tc_keet_nominas_rubros 
				from 
				  tc_keet_nominas_rubros 
			  inner join
				  tc_keet_nominas_proveedores on tc_keet_nominas_rubros.id_nomina_proveedor= tc_keet_nominas_proveedores.id_nomina_proveedor
			  inner join
				  tc_keet_nominas on tc_keet_nominas_proveedores.id_nomina= tc_keet_nominas.id_nomina
				where 
				  tc_keet_nominas.id_nomina= {idNomina}				
				  and tc_keet_nominas_proveedores.id_proveedor= {idProveedor}
			</delete>
    </unit>				
    <unit id="TcKeetPersonasBancosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_personas_bancos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_personas_bancos
        where      
          id_empresa_persona = {idEmpresaPersona} and cuenta = '{cuenta}' and id_banco = {idBanco}
      </select>
			<select id="maximo">
        select      
          max(id_persona_banco) maximo
        from      
          tc_keet_personas_bancos
      </select>
			<delete id="rows">
				delete from tc_keet_personas_bancos where id_empresa_persona = {idEmpresaPersona}
			</delete>
    </unit>	
    <unit id="TcKeetPersonasBeneficiariosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_personas_beneficiarios
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_personas_beneficiarios
        where      
          id_persona_beneficiario = {idPersonaBeneficiario}
      </select>
			<select id="maximo">
        select      
          max(id_persona_beneficiario) maximo
        from      
          tc_keet_personas_beneficiarios
      </select>
			<delete id="rows">
				delete from tc_keet_personas_beneficiarios where id_empresa_persona = {idEmpresaPersona}
			</delete>
    </unit>		
    <unit id="TcKeetProyectosArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_proyectos_archivos
        where 
          {condicion} 
      </select>
			<select id="toContratos">
        select 
					-1 id_contrato_archivo,
					id_prototipo,
					id_plano,
					id_tipo_archivo,
					nombre,
					archivo,
					ruta,
					tamanio,
					observaciones,
				  {idUsuario} id_usuario,
				  {idContrato} id_contrato,
				  replace(alias,'proyecto', 'contrato') alias
				 from
					 tc_keet_proyectos_archivos
				where
					id_proyecto= {idProyecto}
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_archivos
        where      
          id_tipo_archivo = {idTipoArchivo} and nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetProyectosBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_proyectos_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_bitacora
        where      
          id_proyecto_bitacora = {idProyectoBitacora}
      </select>
    </unit>		
    <unit id="TcKeetProyectosEstatusDto">
      <select id="row">
        select      
				  tc_keet_proyectos_estatus.id_proyecto_estatus as id_key,
          tc_keet_proyectos_estatus.*
        from      
          tc_keet_proyectos_estatus
        where 
          {condicion} 
				order by 
				  id_proyecto_estatus
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_estatus
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetProyectosLotesDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_proyectos_lotes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proyectos_lotes
        where      
          manzana = '{manzana}' and lote = {lote}
      </select>
    </unit>		
    <unit id="TcKeetTiposConceptosDto">
      <select id="row">
        select      
          tc_keet_tipos_conceptos.id_tipo_concepto as id_key,
					tc_keet_tipos_conceptos.*
        from      
          tc_keet_tipos_conceptos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_conceptos
        where      
          nombre = '{nombre}'
      </select>
    </unit>	
    <unit id="TcKeetTiposNominasDto">
      <select id="row">
        select      
          tc_keet_tipos_nominas.id_tipo_nomina as id_key,
					tc_keet_tipos_nominas.*
        from      
          tc_keet_tipos_nominas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_nominas
        where      
          nombre = '{nombre}'
      </select>
    </unit>		
    <unit id="TcKeetTiposParentescosDto">
      <select id="row">
        select      
					tc_keet_tipos_parentescos.id_tipo_parentesco as id_key,
          tc_keet_tipos_parentescos.*
        from      
          tc_keet_tipos_parentescos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_tipos_parentescos
        where      
          nombre = '{nombre}'
      </select>
    </unit>			
		<unit id="TcKeetPrototiposDiasDto">
      <select id="row">
        select      
          tc_keet_prototipos_dias.id_prototipo_dia as id_key,
					tc_keet_prototipos_dias.*
        from      
          tc_keet_prototipos_dias
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prototipos_dias
        where      
          id_partida = {idPartida} and id_prototipo = {idPrototipo}
      </select>
			<delete id="igual">
				delete from tc_keet_prototipos_dias where id_prototipo= {idPrototipo}
			</delete>
    </unit>
		<unit id="TcKeetNombresDiasDto">
      <select id="row">
        select      
          tc_keet_nombres_dias.id_nombre_dia as id_key,
					tc_keet_nombres_dias.*
        from      
          tc_keet_nombres_dias
        where 
          {condicion} 
      </select>      
			<select id="identically">
        select      
          *
        from      
          tc_keet_nombres_dias
        where      
          id_nombre_dia = {idNombreDia} and nombre = '{nombre}'
      </select>
    </unit>
		<unit id="TcKeetClientesInfraestructurasDto">
      <select id="row">
        select      
					tc_keet_clientes_infraestructuras.id_cliente_infraestructura as id_key,
          tc_keet_clientes_infraestructuras.*
        from      
          tc_keet_clientes_infraestructuras
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_clientes_infraestructuras
        where      
          id_cliente = {idCliente} and id_cliente_infraestructura = {idClienteInfraestructura} and id_tipo_infraestructura = {idTipoInfraestructura}
      </select>
			<select id="maximo">
				select      
          max(id_cliente_infraestructura) maximo
        from      
          tc_keet_clientes_infraestructuras
			</select>
			<delete id="rows">
        delete from tc_keet_clientes_infraestructuras where id_cliente={idCliente}
      </delete>
    </unit>
		 <unit id="TcKeetClientesViviendasDto">
      <select id="row">
        select      
					tc_keet_clientes_viviendas.id_cliente_vivienda as id_key,
          tc_keet_clientes_viviendas.*
        from      
          tc_keet_clientes_viviendas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_clientes_viviendas
        where      
          id_cliente = {idCliente} and id_tipo_vivienda = {idTipoVivienda} and id_cliente_vivienda = {idClienteVivienda}
      </select>
			<select id="maximo">
				select      
          max(id_cliente_vivienda) maximo
        from      
          tc_keet_clientes_viviendas
			</select>
			<delete id="rows">
        delete from tc_keet_clientes_viviendas where id_cliente={idCliente}
      </delete>
    </unit>
		<unit id="TcKeetProveedoresMaterialesDto">
      <select id="row">
        select      
					tc_keet_proveedores_materiales.id_proveedor_material as id_key,
          tc_keet_proveedores_materiales.*
        from      
          tc_keet_proveedores_materiales
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proveedores_materiales
        where      
          id_proveedor = {idProveedor} and id_proveedor_material = {idProveedorMaterial} and id_articulo = {idArticulo}
      </select>
			<select id="maximo">
				select      
          max(id_proveedor_material) maximo
        from      
          tc_keet_proveedores_materiales
			</select>
			<delete id="rows">
        delete from tc_keet_proveedores_materiales where id_proveedor={idProveedor}
      </delete>
    </unit>
		<unit id="TcKeetContratosPersonalDto">
      <select id="row">
        select      
					tc_keet_contratos_personal.id_contratos_personal as id_key,
          tc_keet_contratos_personal.*
        from      
          tc_keet_contratos_personal
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_personal
        where      
          id_contratos_personal = {idContratosPersonal}
      </select>
      <select id="existe">
        select      
          tc_keet_contratos_personal.id_contrato_persona as id_key,
          tc_keet_contratos_personal.*
        from      
          tc_keet_contratos_personal
        where      
          id_empresa_persona= {idEmpresaPersona}
      </select>
      <select id="desarrollo">
        select      
          tc_keet_contratos_personal.id_contratos_personal as id_key,
          tc_keet_contratos_personal.*
        from      
          tc_keet_contratos_personal
        where      
          id_empresa_persona= {idEmpresaPersona}
        order by
          id_desarrollo desc
      </select>
			<select id="maximo">
				select      
          max(id_contratos_personal) maximo
        from      
          tc_keet_contratos_personal
			</select>
			<select id="numeroRegistros">
				select 
          count(*) as total 
        from 
          tc_keet_contratos_personal 
        where 
          id_empresa_persona= {idEmpresaPersona}
			</select>
			<delete id="contrato">
				delete from tc_keet_contratos_personal where id_desarrollo= {idDesarrollo}
			</delete>
			<delete id="contratoPersona">
				delete from tc_keet_contratos_personal where id_empresa_persona= {idEmpresaPersona}
			</delete>
      <delete id="persona">
				delete 
          tc_keet_contratos_personal 
        from 
          tc_keet_contratos_personal 
        inner join  
          tr_mantic_empresa_personal on tc_keet_contratos_personal.id_empresa_persona= tr_mantic_empresa_personal.id_empresa_persona
        where 
          tr_mantic_empresa_personal.id_persona= {idPersona}
			</delete>
    </unit>
		<unit id="TcKeetContratosDto">
      <select id="row">
        select      
					tc_keet_contratos.id_contrato as id_key,
					tc_keet_contratos.*
        from      
          tc_keet_contratos
        where 
          {condicion} 
      </select>
			<select id="byId">
        select      
				  tc_keet_contratos.id_contrato id_key,
          tc_keet_contratos.*
        from      
          tc_keet_contratos
        where 
          id_contrato= {idContrato}
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_contratos
				where				  
				  ejercicio = {ejercicio}			
			</select>	
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos
        where      
          consecutivo = '{consecutivo}' and id_contrato = {idContrato}
      </select>
      <select id="desarrollo">
        select      
					tc_keet_contratos.id_contrato as id_key,
					tc_keet_contratos.*
        from      
          tc_keet_contratos
        where 
          id_desarrollo_
      </select>
    </unit>
		 <unit id="TcKeetContratosArchivosDto">
      <select id="row">
        select      
          tc_keet_contratos_archivos.id_contrato_archivo as id_key,
					tc_keet_contratos_archivos.*
        from      
          tc_keet_contratos_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_archivos
        where      
          id_contrato_archivo = {idContratoArchivo} and id_tipo_archivo = {idTipoArchivo} and id_contrato = {idContrato} and nombre = '{nombre}'
      </select>
    </unit>
	    <unit id="TcKeetContratosBitacoraDto">
      <select id="row">
        select      
          tc_keet_contratos_bitacora.id_contrato_bitacora as id_key,
					tc_keet_contratos_bitacora.*
        from      
          tc_keet_contratos_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_bitacora
        where      
          id_contrato_bitacora = {idContratoBitacora}
      </select>
    </unit>
	<unit id="TcKeetContratosEstatusDto">
      <select id="row">
        select      
          tc_keet_contratos_estatus.id_contrato_estatus as id_key,
					tc_keet_contratos_estatus.*
        from      
          tc_keet_contratos_estatus
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_estatus
        where      
          id_contrato_estatus = {idContratoEstatus} and nombre = '{nombre}'
      </select>
    </unit>
	<unit id="TcKeetContratosFirmadosDto">
      <select id="row">
        select      
          tc_keet_contratos_firmados.id_contrato_firmado as id_key,
					tc_keet_contratos_firmados.*
        from      
          tc_keet_contratos_firmados
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_firmados
        where      
          id_tipo_archivo = {idTipoArchivo} and id_contrato = {idContrato} and id_contrato_firmado = {idContratoFirmado} and nombre = '{nombre}'
      </select>
    </unit>
	    <unit id="TcKeetContratosGeneradoresDto">
      <select id="row">
        select      
          tc_keet_contratos_generadores.id_contrato_generador as id_key,
					tc_keet_contratos_generadores.*
        from      
          tc_keet_contratos_generadores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_generadores
        where      
          id_tipo_generador = {idTipoGenerador} and id_contrato_generador = {idContratoGenerador} and id_tipo_archivo = {idTipoArchivo} and id_contrato = {idContrato} and nombre = '{nombre}'
      </select>
    </unit>
	    <unit id="TcKeetContratosLotesDto">
      <select id="row">
        select      
          tc_keet_contratos_lotes.id_contrato_lote as id_key,
					tc_keet_contratos_lotes.*
        from      
          tc_keet_contratos_lotes
        where 
          {condicion} 
				order by
				  inicio, manzana, convert(lote, unsigned integer)
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_lotes
        where      
          manzana = '{manzana}' and lote = {lote} and id_contrato = {idContrato} and id_contrato_lote = {idContratoLote}
      </select>
      <select id="igual">
        select      
          *
        from      
          tc_keet_contratos_lotes
        where      
          id_contrato_lote = {idContratoLote}
      </select>
			<select id="byContrato">
        select      
				  tc_keet_contratos_lotes.id_contrato_lote id_key,
          tc_keet_contratos_lotes.*
        from      
          tc_keet_contratos_lotes
        where 
          id_contrato= {idContrato} 
				order by
         convert(manzana, unsigned integer),
         convert(lote, unsigned integer)
      </select>
			<select id="byContratoContratistas">
        select      
				  tc_keet_contratos_lotes.id_contrato_lote id_key,
          tc_keet_contratos_lotes.*,
          concat('M', tc_keet_contratos_lotes.manzana, 'L', tc_keet_contratos_lotes.lote, ' [', tc_keet_prototipos.nombre, ']') as descripcion,
          concat('M', tc_keet_contratos_lotes.manzana, 'L', tc_keet_contratos_lotes.lote) as descripcion_lote,
					((select count(*) total from tc_keet_contratos_lotes_contratistas where id_contrato_lote = tc_keet_contratos_lotes.id_contrato_lote) + (select count(*) total from tc_keet_contratos_lotes_proveedores where id_contrato_lote = tc_keet_contratos_lotes.id_contrato_lote)) as contratistas,
          tc_keet_prototipos.nombre as prototipo
        from      
          tc_keet_contratos_lotes
        inner join
          tc_keet_prototipos on tc_keet_contratos_lotes.id_prototipo= tc_keet_prototipos.id_prototipo
        where 
          id_contrato= {idContrato} 
				order by
				  manzana, convert(lote, unsigned integer)
      </select>
			<select id="byContratoResidentes">
        select      
				  tc_keet_contratos_lotes.id_contrato_lote id_key,
          tc_keet_contratos_lotes.*,
          concat('M', tc_keet_contratos_lotes.manzana, 'L', tc_keet_contratos_lotes.lote) as descripcion_lote,
					(select count(*) total from tc_keet_contratos_lotes_residentes where id_contrato_lote = tc_keet_contratos_lotes.id_contrato_lote) as contratistas,
          tc_keet_prototipos.nombre as prototipo
        from      
          tc_keet_contratos_lotes
        inner join
          tc_keet_prototipos on tc_keet_contratos_lotes.id_prototipo= tc_keet_prototipos.id_prototipo
        where 
          id_contrato= {idContrato} 
				order by
				  manzana, convert(lote, unsigned integer)
      </select>
			<select id="siguiente">
        select      
				  max(orden)+ 1 max_orden
        from      
          tc_keet_contratos_lotes
        where 
          id_contrato= {idContrato} 
      </select>
			 <update id="limpiaOrden">
				update 
				  tc_keet_contratos_lotes 
				set 
				  orden= 0 
				where 
				  id_contrato= {idContrato} 
			</update>
    </unit>
	    <unit id="TcKeetContratosPresupuestosDto">
      <select id="row">
        select      
          tc_keet_contratos_presupuestos.id_contrato_presupuesto as id_key,
					tc_keet_contratos_presupuestos.*
        from      
          tc_keet_contratos_presupuestos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_presupuestos
        where      
          id_tipo_archivo = {idTipoArchivo} and id_contrato = {idContrato} and id_tipo_presupuesto = {idTipoPresupuesto} and nombre = '{nombre}' and id_contrato_presupuesto = {idContratoPresupuesto}
      </select>
    </unit>
	    <unit id="TcKeetContratosProyectosDto">
      <select id="row">
        select      
          tc_keet_contratos_proyectos.id_contrato_proyecto as id_key,
					tc_keet_contratos_proyectos.*
        from      
          tc_keet_contratos_proyectos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_proyectos
        where      
          id_cliente_contrato = {idClienteContrato} and clave = '{clave}' and id_contrato_proyecto = {idContratoProyecto} and nombre = '{nombre}'
      </select>
    </unit>
		<unit id="TcKeetPrestamosArchivosDto">
      <select id="row">
        select      
          tc_keet_prestamos_archivos.id_prestamo_archivo id_key,
				  tc_keet_prestamos_archivos.*
        from      
          tc_keet_prestamos_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_archivos
        where      
          id_prestamo_archivo = {idPrestamoArchivo} and nombre = '{nombre}'
      </select>
    </unit>
		<unit id="TcKeetPrestamosBitacoraDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_prestamos_bitacora
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_bitacora
        where      
          id_prestamo_bitacora = {idPrestamoBitacora} and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
    </unit>
		<unit id="TcKeetPrestamosEstatusDto">
      <select id="row">
        select      
          tc_keet_prestamos_estatus.id_prestamo_estatus as id_key,
				  tc_keet_prestamos_estatus.*
        from      
          tc_keet_prestamos_estatus
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_estatus
        where      
          nombre = '{nombre}' and id_prestamo_estatus = {idPrestamoEstatus}
      </select>
    </unit>
		<unit id="TcKeetPrestamosPagosDto">
      <select id="row">
        select      
          tc_keet_prestamos_pagos.id_prestamo_pago as id_key,
				  tc_keet_prestamos_pagos.*
        from      
          tc_keet_prestamos_pagos
        where 
          {condicion} 
      </select>
      <select id="byIdPrestamo">
        select      
          tc_keet_prestamos_pagos.id_prestamo_pago as id_key,
				  tc_keet_prestamos_pagos.*
        from      
          tc_keet_prestamos_pagos
        where 
          id_prestamo= {idPrestamo} 
      </select>
			<select id="siguiente">
        select
					max(orden)+ 1 as siguiente
				from 
					tc_keet_prestamos_pagos
				where				  
				  ejercicio = {ejercicio}			
			</select>			
      <select id="identically">
        select      
          *
        from      
          tc_keet_prestamos_pagos
        where      
          id_prestamo_pago = {idPrestamoPago} and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
    </unit>
		<unit id="TcKeetContratosLotesProveedoresDto">
      <select id="row">
        select      
					tc_keet_contratos_lotes_proveedores.id_contrato_lote_proveedor as id_key,
          tc_keet_contratos_lotes_proveedores.*
        from      
          tc_keet_contratos_lotes_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_lotes_proveedores
        where      
          id_proveedor = {idProveedor} and id_contrato_lote = {idContratoLote} and id_contrato_lote_proveedor = {idContratoLoteProveedor}
      </select>
			<select id="existe">
        select      
          *
        from      
          tc_keet_contratos_lotes_proveedores
        where      
          id_proveedor = {idProveedor} and id_contrato_lote = {idContratoLote}
      </select>
			<delete id="contratoLotePersona">
				delete from tc_keet_contratos_lotes_proveedores where id_proveedor = {idProveedor} and id_contrato_lote = {idContratoLote}
			</delete>
			<delete id="depuracionCambioPerfil">
				delete from tc_keet_contratos_lotes_proveedores where id_proveedor = {idProveedor}
			</delete>
			<select id="trabajoLotes">
				select count(*) total from tc_keet_contratos_lotes_proveedores where id_proveedor = {idProveedor} and id_trabajo=1
			</select>
    </unit>
		<unit id="TcKeetProveedoresDepartamentosDto">
      <select id="row">
        select      
          tc_keet_proveedores_departamentos.id_proveedor_departamento as id_key,
				  tc_keet_proveedores_departamentos.*
        from      
          tc_keet_proveedores_departamentos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_proveedores_departamentos
        where      
          id_proveedor = {idProveedor} and id_departamento = {idDepartamento}
      </select>
			<select id="maximo">
				select      
          max(id_proveedor_departamento) as maximo
        from      
          tc_keet_proveedores_departamentos
			</select>
    </unit>
		<unit id="TcKeetContratosPuntosContratistasDto">
      <select id="row">
        select      
				  tc_keet_contratos_puntos_contratistas.id_contrato_punto_contratista as id_key,
          tc_keet_contratos_puntos_contratistas.*
        from      
          tc_keet_contratos_puntos_contratistas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      					
          *
        from      
          tc_keet_contratos_puntos_contratistas
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_punto_contratista = {idContratoPuntoContratista} and id_contrato_destajo_contratista = {idContratoDestajoContratista}
      </select>
      <select id="puntoPivote">
        select 
					tc_keet_contratos_puntos_contratistas.id_contrato_punto_contratista as id_key,
          tc_keet_contratos_puntos_contratistas.*
				from      
          tc_keet_contratos_puntos_contratistas
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_destajo_contratista = {idContratoDestajoContratista}
      </select>
      <delete id="rechazo">
        delete from      
          tc_keet_contratos_puntos_contratistas
        where      
          id_punto_paquete = {idPuntoPaquete} and id_contrato_destajo_contratista = {idContratoDestajoContratista}
      </delete>
    </unit>
		<unit id="TcKeetContratosPuntosProveedoresDto">
      <select id="row">
        select      
				  tc_keet_contratos_puntos_proveedores.id_contrato_punto_proveedor as id_key,
          tc_keet_contratos_puntos_proveedores.*
        from      
          tc_keet_contratos_puntos_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_puntos_proveedores
        where      
          id_contrato_destajo_proveedor = {idContratoDestajoProveedor} and id_punto_paquete = {idPuntoPaquete} and id_contrato_punto_proveedor = {idContratoPuntoProveedor}
      </select>
      <select id="puntoPivote">
        select 
					tc_keet_contratos_puntos_proveedores.id_contrato_punto_proveedor as id_key,
          tc_keet_contratos_puntos_proveedores.*
				from      
          tc_keet_contratos_puntos_proveedores
        where      
          id_contrato_destajo_proveedor = {idContratoDestajoProveedor} and id_punto_paquete = {idPuntoPaquete}
      </select>
      <delete id="rechazo">
        delete from      
          tc_keet_contratos_puntos_proveedores
        where      
          id_contrato_destajo_proveedor = {idContratoDestajoProveedor} and id_punto_paquete = {idPuntoPaquete}
      </delete>
    </unit>
		<unit id="TcKeetContratosDestajosContratistasDto">
      <select id="row">
        select      
					tc_keet_contratos_destajos_contratistas.id_contrato_destajo_contratista as id_key,
          tc_keet_contratos_destajos_contratistas.*
        from      
          tc_keet_contratos_destajos_contratistas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_destajos_contratistas
        where      
          id_contrato_destajo_contratista = {idContratoDestajoContratista} 
				  and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
      <select id="destajo">
        select      
					tc_keet_contratos_destajos_contratistas.id_contrato_destajo_contratista as id_key,
          tc_keet_contratos_destajos_contratistas.*
        from      
          tc_keet_contratos_destajos_contratistas
        where 
          id_estacion= {idEstacion}
				  and id_contrato_lote_contratista= {idContratoLoteContratista}
          and id_nomina is null
      </select>
      <update id="nomina">
				update 
				  tc_keet_contratos_destajos_contratistas 
				set 
				  id_nomina= null 
				where 
				  id_nomina= {idNomina}
			</update>
      <update id="persona">
        update 
				  tc_keet_contratos_destajos_contratistas 
				inner join
				  tc_keet_contratos_lotes_contratistas on tc_keet_contratos_destajos_contratistas.id_contrato_lote_contratista= tc_keet_contratos_lotes_contratistas.id_contrato_lote_contratista
				set 
				  tc_keet_contratos_destajos_contratistas.id_nomina= null 
				where 
				  tc_keet_contratos_destajos_contratistas.id_nomina= {idNomina}
				  and tc_keet_contratos_lotes_contratistas.id_empresa_persona= {idEmpresaPersona}
			</update>
			<select id="evidenciaDestajo">
				select      
					tc_keet_contratos_destajos_contratistas.id_contrato_destajo_contratista as id_key,
          tc_keet_contratos_destajos_contratistas.*
        from      
          tc_keet_contratos_destajos_contratistas
        where 
          tc_keet_contratos_destajos_contratistas.id_estacion= {idEstacion}
				  and tc_keet_contratos_destajos_contratistas.id_contrato_lote_contratista= {idContratoLoteContratista}
				  and tc_keet_contratos_destajos_contratistas.id_estacion_estatus != {idEstacionEstatus}
			</select>			
		</unit>
		<unit id="TcKeetContratosDestajosProveedoresDto">
      <select id="row">
        select      
					tc_keet_contratos_destajos_proveedores.id_contrato_destajo_proveedor as id_key,
          tc_keet_contratos_destajos_proveedores.*
        from      
          tc_keet_contratos_destajos_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_destajos_proveedores
        where      
          id_contrato_destajo_proveedor = {idContratoDestajoProveedor} 
          and date_format(registro, '%Y%m%d%H%i%S') = '{registro}'
      </select>
      <select id="destajo">
        select      
					tc_keet_contratos_destajos_proveedores.id_contrato_destajo_proveedor as id_key,
          tc_keet_contratos_destajos_proveedores.*
        from      
          tc_keet_contratos_destajos_proveedores
        where 
          id_estacion= {idEstacion}
				  and id_contrato_destajo_proveedor= {idContratoLoteProveedor}
          and id_nomina is null
      </select>
			<update id="nomina">
				update 
				  tc_keet_contratos_destajos_proveedores 
				set 
				  id_nomina= null 
				where 
				  id_nomina= {idNomina}
			</update>
			<update id="proveedor">
				update 
				  tc_keet_contratos_destajos_proveedores 
				inner join
				  tc_keet_contratos_lotes_proveedores on tc_keet_contratos_destajos_proveedores.id_contrato_lote_proveedor= tc_keet_contratos_lotes_proveedores.id_contrato_lote_proveedor
				set 
				  tc_keet_contratos_destajos_proveedores.id_nomina= null 
				where 
				  tc_keet_contratos_destajos_proveedores.id_nomina= {idNomina}
				  and tc_keet_contratos_lotes_proveedores.id_proveedor= {idProveedor}
			</update>
			<select id="evidenciaDestajo">
				select      
					tc_keet_contratos_destajos_proveedores.id_contrato_destajo_proveedor as id_key,
          tc_keet_contratos_destajos_proveedores.*
        from      
          tc_keet_contratos_destajos_proveedores
        where 
          tc_keet_contratos_destajos_proveedores.id_estacion= {idEstacion}
				  and tc_keet_contratos_destajos_proveedores.id_contrato_lote_proveedor= {idContratoLoteProveedor}
				  and tc_keet_contratos_destajos_proveedores.id_estacion_estatus != {idEstacionEstatus}
			</select>			
    </unit>
		<unit id="TcKeetPuntosControlesDto">
      <select id="row">
        select      
				  tc_keet_puntos_controles.id_punto_control id_key,
          tc_keet_puntos_controles.*
        from      
          tc_keet_puntos_controles
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_puntos_controles
        where      
          id_punto_control = {idPuntoControl}
      </select>
    </unit>
		<unit id="TcKeetPuntosGruposDto">
      <select id="row">
        select      
          tc_keet_puntos_grupos.id_punto_grupo id_key,
          tc_keet_puntos_grupos.*
        from      
          tc_keet_puntos_grupos
        where 
          {condicion} 
      </select>
      <select id="byDepartamento">
        select      
          tc_keet_puntos_grupos.id_punto_grupo id_key,
          tc_keet_puntos_grupos.*
        from      
          tc_keet_puntos_grupos
        where 
          id_departamento= {idDepartamento}
      </select>
      <select id="byDepartamentoExtra">
        select      
          tc_keet_puntos_grupos.id_punto_grupo id_key,
          tc_keet_puntos_grupos.*
        from      
          tc_keet_puntos_grupos
        where 
          id_departamento= {idDepartamento}
				and 
					id_extra= {idExtra}
      </select>
      <select id="siguiente">
        select 
					max(cast(replace(descripcion, 'PAQUETE ', '')as int)+ 1) siguiente
				from 
				  tc_keet_puntos_grupos
				where
				  id_departamento= {idDepartamento}
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_puntos_grupos
        where      
          id_departamento = {idDepartamento} and grupo = {grupo} and id_punto_grupo = {idPuntoGrupo}
      </select>
    </unit>
		    <unit id="TcKeetPuntosPaquetesDto">
      <select id="row">
        select      
          tc_keet_puntos_paquetes.id_punto_paquete id_key,
          tc_keet_puntos_paquetes.*
        from      
          tc_keet_puntos_paquetes
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_puntos_paquetes
        where      
          id_punto_paquete = {idPuntoPaquete} and id_punto_control = {idPuntoControl} and id_punto_grupo = {idPuntoGrupo}
      </select>
      <select id="find">
        select      
          tc_keet_puntos_paquetes.id_punto_paquete id_key,
          tc_keet_puntos_paquetes.*
        from      
          tc_keet_puntos_paquetes
        where      
          id_punto_control = {idPuntoControl} and id_punto_grupo = {idPuntoGrupo}
      </select>
    </unit>
		<unit id="TcKeetContratosRechazosContratistasDto">
      <select id="row">
        select      
					tc_keet_contratos_rechazos_contratistas.id_contrato_rechazo_contratista as id_key,
          tc_keet_contratos_rechazos_contratistas.*
        from      
          tc_keet_contratos_rechazos_contratistas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_rechazos_contratistas
        where      
          id_contrato_rechazo_contratista = {idContratoRechazoContratista}
      </select>
    </unit>
		<unit id="TcKeetContratosRechazosProveedoresDto">
      <select id="row">
        select
					tc_keet_contratos_rechazos_proveedores.id_contrato_rechazo_proveedor as id_key,      
          tc_keet_contratos_rechazos_proveedores.*
        from      
          tc_keet_contratos_rechazos_proveedores
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_contratos_rechazos_proveedores
        where      
          id_contrato_rechazo_proveedor = {idContratoRechazoProveedor}
      </select>
    </unit>
		<unit id="TcKeetRubrosDto">
      <select id="row">
        select      
				  tc_keet_rubros.id_rubro id_key,
          tc_keet_rubros.*
        from      
          tc_keet_rubros
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_rubros
        where      
          codigo = '{codigo}' and id_rubro = {idRubro}
      </select>
      <select id="siguiente">
        select      
          max(orden)+ 1 as siguiente
        from      
          tc_keet_rubros
      </select>
    </unit>
		<unit id="TcKeetRubrosGruposDto">
      <select id="row">
        select      
				  tc_keet_rubros_grupos.id_rubro_grupo id_key,
          tc_keet_rubros_grupos.*
        from      
          tc_keet_rubros_grupos
        where 
          {condicion} 
      </select>
      <select id="byRubro">
        select      
				  tc_keet_rubros_grupos.id_rubro_grupo id_key,
          tc_keet_rubros_grupos.*
        from      
          tc_keet_rubros_grupos
        where 
          id_rubro = {idRubro}
        order by
          id_punto_grupo
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_rubros_grupos
        where      
          id_rubro_grupo = {idRubroGrupo} and id_punto_grupo = {idPuntoGrupo} and id_rubro = {idRubro}
      </select>
    </unit>
		<unit id="TcKeetPartidasDto">
      <select id="row">
        select    
				  tc_keet_partidas.id_partida id_key,  
          tc_keet_partidas.*
        from      
          tc_keet_partidas
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_partidas
        where      
          codigo = '{codigo}' and id_partida = {idPartida}
      </select>
      <select id="partidas">
        select
          tc_keet_partidas.id_partida as id_key,
          -1 as id_estacion,
          tc_keet_partidas.codigo,
          tc_keet_partidas.nombre,
          tc_keet_partidas.dias as anterior,
          {idPrototipo} as id_prototipo,
          tc_keet_partidas.id_partida,  
          {idUsuario} as id_usuario,
          tc_keet_partidas.dias,
          tc_keet_partidas.orden 
        from
          tc_keet_partidas
        where
          tc_keet_partidas.id_destajo= 1          
        order by
         tc_keet_partidas.orden        
      </select>  
    </unit>
		<unit id="TcKeetValesArchivosDto">
      <select id="row">
        select      
          *
        from      
          tc_keet_vales_archivos
        where 
          {condicion} 
      </select>
      <select id="identically">
        select      
          *
        from      
          tc_keet_vales_archivos
        where      
          id_vale_archivo = {idValeArchivo} and nombre = '{nombre}'
      </select>
    </unit>
  </dml>    
</process>
